[{"createdAt":"2025-03-13T18:02:07.472Z","updatedAt":"2025-03-14T13:22:15.000Z","id":"04zWVqL2ME8FUs5y","name":"My workflow","active":false,"isArchived":false,"nodes":[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.1,"position":[0,0],"id":"dab6d9c1-f613-46ff-b118-1d586964332b","name":"Telegram Trigger","webhookId":"42232d70-de03-4c58-9d1f-e5db4d74a339","credentials":{"telegramApi":{"id":"OfBBU5xslylnUez7","name":"Telegram account"}}},{"parameters":{"promptType":"define","text":"={{ $json.message.text }}","options":{"systemMessage":"You are a professional data scientist . Your task is to analyze the message provided by user description and research the topic on internet.\nYour key objectives are:\n\n1- research relevant details about the topic and write a 1000 word blogpost in a structured JSON format.\n\n7-Output only the structured JSON with English values for each key. Do not add any explanation or additional comments.\n\n\n**Output Format**\n\n{\n\"Title\": brief title for the blog,\n\"Content\": content\n}\n\nGuidelines:\n\n1- Translation: If the description is in a foreign language, translate it to English before extracting the data. Record the extracted details in English in the JSON output.\n\n2- Completeness: Ensure the JSON output covers all key details. If information is not provided in the description, explicitly mark it as \"Not Provided.\""}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.8,"position":[220,0],"id":"94294885-19b3-48a2-822d-2d59b8459f8d","name":"AI Agent"},{"parameters":{"modelName":"models/gemma-3-27b-it","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[260,220],"id":"a047c659-8841-4a4a-b278-917f41ecb579","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"DT6tCE7eOCxH9sdQ","name":"Google Gemini(PaLM) Api account"}}},{"parameters":{"title":"={{ $json.Title }}","additionalFields":{"content":"={{ $json.Content }}"}},"type":"n8n-nodes-base.wordpress","typeVersion":1,"position":[880,-20],"id":"6b670c60-ecb8-4b52-8f51-4c411c843698","name":"Wordpress","credentials":{"wordpressApi":{"id":"SdXAZkZVFuk8jRCL","name":"Wordpress account"}}},{"parameters":{"jsCode":"// Loop over input items and transform the output JSON\nconst outputArray = [];\n\nfor (const item of $input.all()) {\n    // Clean up the JSON string before parsing\n    //let cleanOutput = item.json.output.replace(/\"|\"/g, \"\").trim();  \n    let cleanOutput = item.json.output.replace(/```json|```/g, \"\").trim();\n    let cleanOuput = item.json.output.split(\"\\n\")\n    let extractedJson = JSON.parse(cleanOutput);\n\n    // Format and modify the extracted JSON\n    outputArray.push({\n      \"Title\": extractedJson.Title,\n  \"Content\": extractedJson.Content,\n})}\n\nreturn outputArray;\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[660,-20],"id":"3e92dddf-20f3-438d-8182-67ad66bdc97c","name":"Code"}],"connections":{"Telegram Trigger":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"AI Agent":{"main":[[{"node":"Code","type":"main","index":0}]]},"Code":{"main":[[{"node":"Wordpress","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"50e26517-0098-4698-bc6f-fd0cdc6ee338","triggerCount":0,"tags":[]},{"createdAt":"2025-03-13T20:52:11.201Z","updatedAt":"2025-03-14T08:07:57.000Z","id":"thDTch2G1RrvonmP","name":"Write a WordPress post with AI (starting from a few keywords)","active":false,"isArchived":false,"nodes":[{"parameters":{"path":"create-wordpress-post","formTitle":"Create a WordPress post with AI","formDescription":"Fill this form with the required information to create a draft post on WordPress","formFields":{"values":[{"fieldLabel":"Keywords (comma-separated)","requiredField":true},{"fieldLabel":"Number of chapters","fieldType":"dropdown","fieldOptions":{"values":[{"option":"1"},{"option":"2"},{"option":"3"},{"option":"4"},{"option":"5"},{"option":"6"},{"option":"7"},{"option":"8"},{"option":"9"},{"option":"10"}]},"requiredField":true},{"fieldLabel":"Max words count","fieldType":"number","requiredField":true}]},"responseMode":"responseNode","options":{}},"id":"a4f19a81-6101-48c2-9560-9cf231bc240b","name":"Form","type":"n8n-nodes-base.formTrigger","position":[440,420],"webhookId":"4b937814-e829-4df7-aaba-31192babf7e1","typeVersion":2},{"parameters":{"content":"## Data check","height":371.765663140765,"width":301.3874093724939,"color":4},"id":"e4cf75f7-00e7-473a-a944-af635581715f","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","position":[1229.9876923362115,240],"typeVersion":1},{"parameters":{"content":"Checks that the data returned by OpenAI is correct","height":80,"width":272.8190508599808,"color":7},"id":"e949a487-6701-4650-b9be-08146b4e93ad","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","position":[1245.2053592295229,300],"typeVersion":1},{"parameters":{"content":"## Draft on WordPress","height":371.7656631407652,"width":282.3398199598652,"color":5},"id":"662fe28b-c0b7-4aef-b99c-a8c4c641251c","name":"Sticky Note5","type":"n8n-nodes-base.stickyNote","position":[2600,240],"typeVersion":1},{"parameters":{"content":"The article is posted as a draft on WordPress","height":80,"width":254.77269221373095,"color":7},"id":"85996d51-ab98-41f5-b525-d926f04f50a8","name":"Sticky Note9","type":"n8n-nodes-base.stickyNote","position":[2615,300],"typeVersion":1},{"parameters":{"content":"## Featured image","height":369.2595606183891,"width":557.7592769264069,"color":3},"id":"46f67505-f2dc-4110-b1d4-a27d7814cb52","name":"Sticky Note10","type":"n8n-nodes-base.stickyNote","position":[2901,240],"typeVersion":1},{"parameters":{"content":"The image is generated with Dall-E, uploaded to WordPress, and then connected to the post as its featured image","height":80,"width":517.9195082760601,"color":7},"id":"a1beeb4f-f171-4c6a-ac19-7086b09757ab","name":"Sticky Note11","type":"n8n-nodes-base.stickyNote","position":[2920,300],"typeVersion":1},{"parameters":{"content":"Starting from the given keywords, generates the article title, subtitle, chapters, and image prompt","height":80,"width":287.370178643191,"color":7},"id":"d1fd737b-7f14-4371-8720-7742f708e641","name":"Sticky Note12","type":"n8n-nodes-base.stickyNote","position":[902.0049230655154,300],"typeVersion":1},{"parameters":{"content":"## Article structure","height":370.512611879577,"width":319.697690939268,"color":6},"id":"ccaaf851-613b-4d0c-8b3d-99a35ec9cdad","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","position":[890.065948289274,242],"typeVersion":1},{"parameters":{"content":"## User form","height":370.512611879577,"width":239.97343293577688,"color":7},"id":"69bebd7b-8ad5-4b0d-a8df-1b2e6d4be96e","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","position":[380,240],"typeVersion":1},{"parameters":{"content":"The user triggers the post creation","height":80,"width":199.7721486302032,"color":7},"id":"2037f81b-189c-4dc4-a4dc-179e4283544c","name":"Sticky Note13","type":"n8n-nodes-base.stickyNote","position":[397,300],"typeVersion":1},{"parameters":{"content":"## User feedback","height":370.512611879577,"width":219.70753707029849,"color":7},"id":"e8d7f711-185d-499b-ba58-de52ac6a4e58","name":"Sticky Note4","type":"n8n-nodes-base.stickyNote","position":[3481,240],"typeVersion":1},{"parameters":{"content":"Final confirmation to the user","height":80,"width":183.38125554060056,"color":7},"id":"d89bebca-3607-4c66-a13d-07c32262e01a","name":"Sticky Note14","type":"n8n-nodes-base.stickyNote","position":[3501,300],"typeVersion":1},{"parameters":{"content":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nUser is notified to try again since some data is missing","height":288.4116890365125,"width":281.2716777103785,"color":7},"id":"7df452e2-52f3-4efe-94a4-7d4eab0670c8","name":"Sticky Note6","type":"n8n-nodes-base.stickyNote","position":[1554.9876923362115,630.9889231025903],"typeVersion":1},{"parameters":{"content":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWikipedia is used to write the article","height":275.3956890735875,"width":319.8306137081817,"color":7},"id":"f881bcd9-c7d2-4a1c-bc1a-beb515d52ade","name":"Sticky Note7","type":"n8n-nodes-base.stickyNote","position":[891.0135384301673,632.991384635348],"typeVersion":1},{"parameters":{"assignments":{"assignments":[{"id":"3a433b0f-9957-4b64-ad81-359ab5e521d5","name":"wordpress_url","type":"string","value":"https://editingdestiny.duckdns.org/"},{"id":"ec5430e3-92c5-46e4-8c2c-c87291680892","name":"keywords","type":"string","value":"={{ $json['Keywords (comma-separated)'] }}"},{"id":"5defb0a2-d921-4909-b10d-da59e1768496","name":"chapters","type":"number","value":"={{ $json['Number of chapters'] }}"},{"id":"230ebd0b-73c2-4265-9b3c-57af7fbc48c8","name":"words","type":"number","value":"={{ $json['Max words count'] }}"}]},"options":{}},"id":"1b788b37-b8b5-47f6-8198-547dac8c76d6","name":"Settings","type":"n8n-nodes-base.set","position":[700,420],"typeVersion":3.3},{"parameters":{"content":"## Settings","height":370.512611879577,"width":226.71615243495023,"color":2},"id":"af29ed91-84b5-43f8-b1ce-1c8dc35c2c1b","name":"Sticky Note8","type":"n8n-nodes-base.stickyNote","position":[643,240],"typeVersion":1},{"parameters":{"content":"Set the URL of your WordPress here","height":80,"width":179.37633247508526,"color":7},"id":"a6fe2238-22ba-4c54-adef-663bd3955dcc","name":"Sticky Note15","type":"n8n-nodes-base.stickyNote","position":[660,300],"typeVersion":1},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"9c8c53ea-6079-48da-9d6e-dd527167b123","operator":{"type":"string","operation":"notEmpty","singleValue":true},"leftValue":"={{ $json.message.content.title }}","rightValue":""},{"id":"a7fabfe1-3539-453a-93d9-8d6d395c3de4","operator":{"type":"array","operation":"lengthGte","rightType":"number"},"leftValue":"={{ $json.message.content.chapters }}","rightValue":"={{ 1 }}"},{"id":"a687081e-24e2-423c-a2da-b7c18baf0715","operator":{"type":"string","operation":"notEmpty","singleValue":true},"leftValue":"={{ $json.message.content.subtitle }}","rightValue":""},{"id":"0a435a69-3699-4b98-b46f-40954c7a7816","operator":{"type":"string","operation":"notEmpty","singleValue":true},"leftValue":"={{ $json.message.content.introduction }}","rightValue":""},{"id":"1a440144-21f3-42bd-9222-774bd564f3ef","operator":{"type":"string","operation":"notEmpty","singleValue":true},"leftValue":"={{ $json.message.content.conclusions }}","rightValue":""},{"id":"834ce92d-b1e9-48ef-ae63-1d0841c900b5","operator":{"type":"string","operation":"notEmpty","singleValue":true},"leftValue":"={{ $json.message.content.imagePrompt }}","rightValue":""}],"combinator":"and"},"options":{}},"id":"358ac79f-be7d-44eb-a353-b2ad4ac8d582","name":"Check data consistency","type":"n8n-nodes-base.if","position":[1320,420],"typeVersion":2},{"parameters":{"fieldToSplitOut":"message.content.chapters","options":{}},"id":"479f474a-1687-4588-8485-d793afc6757d","name":"Split out chapters","type":"n8n-nodes-base.splitOut","position":[1620,420],"typeVersion":1},{"parameters":{"mode":"combine","combinationMode":"mergeByPosition","options":{}},"id":"bde7b7db-45c6-4ab3-a705-358000cefbec","name":"Merge chapters title and text","type":"n8n-nodes-base.merge","position":[2240,560],"typeVersion":2.1},{"parameters":{"jsCode":"let article = \"\";\n\n// Introduction\narticle += $('Create post title and structure').first().json.message.content.introduction;\narticle += \"<br><br>\";\n\nfor (const item of $input.all()) {\n  article += \"<strong>\" + item.json.title + \"</strong>\";\n  article += \"<br><br>\";\n  article += item.json.message.content;\n  article += \"<br><br>\";\n}\n\n// Conclusions\narticle += \"<strong>Conclusions</strong>\";\narticle += \"<br><br>\";\narticle += $('Create post title and structure').first().json.message.content.conclusions;\n\n\nreturn [\n  {\n    \"article\": article\n  }\n];"},"id":"0079022b-eaa2-481b-8c78-f8623a63645b","name":"Final article text","type":"n8n-nodes-base.code","position":[2420,420],"typeVersion":1},{"parameters":{"title":"={{ $('Create post title and structure').all()[0].json.message.content.title }}","additionalFields":{"content":"={{ $json.article }}","status":"draft"}},"id":"d892f00a-90fd-4bbb-bac6-4684d7d0c638","name":"Post on Wordpress","type":"n8n-nodes-base.wordpress","position":[2700,420],"typeVersion":1,"credentials":{"wordpressApi":{"id":"SdXAZkZVFuk8jRCL","name":"Wordpress account"}}},{"parameters":{"method":"POST","url":"https://editingdestiny.duckdns.org/wp-json/wp/v2/media","authentication":"predefinedCredentialType","nodeCredentialType":"wordpressApi","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Disposition","value":"attachment; filename=\"example.jpg\""}]},"sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{}},"id":"a609d80d-f586-4e5f-a72d-01257f676574","name":"Upload media","type":"n8n-nodes-base.httpRequest","position":[3140,420],"typeVersion":4.1,"credentials":{"wordpressApi":{"id":"SdXAZkZVFuk8jRCL","name":"Wordpress account"}}},{"parameters":{"method":"POST","url":"=https://editingdestiny.duckdns.org/wp-json/wp/v2/media/{{ $('Post on Wordpress').item.json.id }}","authentication":"predefinedCredentialType","nodeCredentialType":"wordpressApi","sendQuery":true,"queryParameters":{"parameters":[{"name":"featured_media","value":"={{ $json.id }}"}]},"options":{}},"id":"bdb2ef52-0201-4fe1-a7a6-59e34e21bf5e","name":"Set image ID for the post","type":"n8n-nodes-base.httpRequest","position":[3300,420],"typeVersion":4.1,"credentials":{"wordpressApi":{"id":"SdXAZkZVFuk8jRCL","name":"Wordpress account"}}},{"parameters":{"respondWith":"json","responseBody":"={\n    \"formSubmittedText\": \"The article {{ $json.title.rendered }} was correctly created as a draft on WordPress!\"\n}","options":{}},"id":"a721762f-168d-4c87-ab6d-0d31deecd9a5","name":"Respond: Success","type":"n8n-nodes-base.respondToWebhook","position":[3540,420],"typeVersion":1},{"parameters":{"respondWith":"json","responseBody":"={\n    'formSubmittedText': 'There was a problem creating the article, please refresh the form and try again!'\n}\n\n","options":{}},"id":"51b79bc2-035d-4db8-87bb-db6c889b164e","name":"Respond: Error","type":"n8n-nodes-base.respondToWebhook","position":[1640,680],"typeVersion":1},{"parameters":{"content":"## Chapters split","height":370.512611879577,"width":225.47038972308582,"color":2},"id":"d8748498-0800-4208-b993-f233d14da7b6","name":"Sticky Note16","type":"n8n-nodes-base.stickyNote","position":[1553.7711864406776,240],"typeVersion":1},{"parameters":{"content":"Splits out chapter contents from the previous node","height":80,"width":185.6051460344073,"color":7},"id":"4115de31-d4e9-4d77-a055-3dead31c4dc5","name":"Sticky Note17","type":"n8n-nodes-base.stickyNote","position":[1570.7711864406779,300],"typeVersion":1},{"parameters":{"content":"Writes the text for each chapter","height":80,"width":287.370178643191,"color":7},"id":"aff8edf6-4e1e-4522-86f7-f0ce88cd0cd4","name":"Sticky Note18","type":"n8n-nodes-base.stickyNote","position":[1812,298],"typeVersion":1},{"parameters":{"content":"## Chapters text","height":370.512611879577,"width":333.40108076977657,"color":6},"id":"e45715a8-b1ca-4499-a16a-854f8bd4f370","name":"Sticky Note19","type":"n8n-nodes-base.stickyNote","position":[1800,240],"typeVersion":1},{"parameters":{"content":"## Content preparation","height":514.2177254645992,"width":420.4253447940705,"color":4},"id":"5c4cd7a1-7dc9-4159-9bd2-dbe5f8feb663","name":"Sticky Note21","type":"n8n-nodes-base.stickyNote","position":[2158.423429009716,240],"typeVersion":1},{"parameters":{"content":"Merges the content and prepare it before sending it to WordPress","height":80,"width":368.1523541074699,"color":7},"id":"7a6d3f7d-0436-4844-b09a-37e805b95a2f","name":"Sticky Note22","type":"n8n-nodes-base.stickyNote","position":[2180,300],"typeVersion":1},{"parameters":{"resource":"image","prompt":"=Generate a photographic image to be used as the cover image for the article titled: {{ $('Create post title and structure').all()[0].json.message.content.title }}. This is the prompt for the image: {{ $('Create post title and structure').all()[0].json.message.content.imagePrompt }}, photography, realistic, sigma 85mm f/1.4","options":{"quality":"hd","size":"1792x1024","style":"natural"}},"id":"903b695d-015a-4956-9c63-45802dfb9fdb","name":"Generate featured image","type":"@n8n/n8n-nodes-langchain.openAi","position":[2960,420],"typeVersion":1,"credentials":{"openAiApi":{"id":"2C7aYCPSWKUSSPc2","name":"OpenAi account"}}},{"parameters":{},"id":"faa847cb-9702-4207-aa1e-6d9f62493527","name":"Wikipedia","type":"@n8n/n8n-nodes-langchain.toolWikipedia","position":[1000,720],"typeVersion":1},{"parameters":{"modelId":{"__rl":true,"mode":"list","value":"gpt-4-1106-preview","cachedResultName":"GPT-4-1106-PREVIEW"},"messages":{"values":[{"content":"=Write the title, the subtitle, the chapters details, the introduction, the conclusions, and an image prompt for a SEO-friendly article about these topics:\n{{ $json.keywords }}.\n\nInstructions:\n- Place the article title in a JSON field called `title`\n- Place the subtitle in a JSON field called `subtitle`\n- Place the introduction in a JSON field called `introduction`\n- In the introduction introduce the topic that is then explored in depth in the rest of the text\n- The introduction should be around 60 words\n- Place the conclusions in a JSON field called `conclusions`\n- The conclusions should be around 60 words\n- Use the conclusions to sum all said in the article and offer a conclusion to the reader\n- The image prompt will be used to produce a photographic cover image for the article and should depict the topics discussed in the article\n- Place the image prompt in a JSON field called `imagePrompt`\n- There should be {{ $json.chapters.toString() }} chapters.\n- For each chapter provide a title and an exaustive prompt that will be used to write the chapter text.\n- Place the chapters in an array field called `chapters`\n- For each chapter provide the fields `title` and `prompt`\n- The chapters should follow a logical flow and not repeat the same concepts.\n- The chapters should be one related to the other and not isolated blocks of text. The text should be fluent and folow a linear logic.\n- Don't start the chapters with \"Chapter 1\", \"Chapter 2\", \"Chapter 3\"... just write the title of the chapter\n- For the title and the capthers' titles don't use colons (`:`)\n- For the text, use HTML for formatting, but limited to bold, italic and lists.\n- Don't use markdown for formatting.\n- Always search on Wikipedia for useful information or verify the accuracy of what you write.\n- Never mention it if you don't find information on Wikipedia or the web\n- Go deep in the topic you treat, don't just throw some superficial info"}]},"jsonOutput":true,"options":{"maxTokens":2048}},"id":"9d09c92e-11c0-4ea9-81d6-13bc9266741a","name":"Create post title and structure","type":"@n8n/n8n-nodes-langchain.openAi","position":[920,420],"typeVersion":1,"credentials":{"openAiApi":{"id":"2C7aYCPSWKUSSPc2","name":"OpenAi account"}}},{"parameters":{"modelId":{"__rl":true,"mode":"list","value":"gpt-4-0125-preview","cachedResultName":"GPT-4-0125-PREVIEW"},"messages":{"values":[{"content":"=Write a chapter for the article: {{ $('Create post title and structure').item.json.message.content.title }}, {{ $('Create post title and structure').item.json.message.content.subtitle  }}, that talks about {{ $('Settings').item.json[\"keywords\"] }}\n\nThis is the prompt for the chapter titled {{ $json.title }}: {{ $json.prompt }}.\n\nGuidelines:\n- Just return the plain text for each chapter (no JSON structure).\n- Don't use markdown for formatting.\n- Use HTML for formatting, but limited to bold, italic and lists.\n- Don't add internal titles or headings.\n- The length of each chapther should be around {{ Math.round(($('Settings').item.json.words - 120)/ $('Settings').item.json.chapters) }} words long\n- Go deep in the topic you treat, don't just throw some superficial info\n{{ $itemIndex > 0 ? \"- The previous chapter talks about \" + $input.all()[$itemIndex-1].json.title : \"\" }}\n{{ $itemIndex > 0 ? \"- The promt for the previous chapter is \" + $input.all()[$itemIndex-1].json.prompt : \"\" }}\n{{ $itemIndex < $input.all().length ? \"- The following chapter will talk about \" + $input.all()[$itemIndex+1].json.title: \"\" }}\n{{ $itemIndex < $input.all().length ? \"- The prompt for the following chapter is \" + $input.all()[$itemIndex+1].json.prompt : \"\" }}\n- Consider the previous and following chapters what writing the text for this chapter. The text must be coherent with the previous and following chapters.\n- This chapter should not repeat the concepts already exposed in the previous chapter.\n- This chapter is a part of a larger article so don't include an introduction or conclusions. This chapter should merge with the rest of the article.\n"}]},"options":{"maxTokens":2048}},"id":"2ecd3a50-a34f-4ab9-ad31-e4e6608708fb","name":"Create chapters text","type":"@n8n/n8n-nodes-langchain.openAi","position":[1840,420],"typeVersion":1,"credentials":{"openAiApi":{"id":"2C7aYCPSWKUSSPc2","name":"OpenAi account"}}}],"connections":{"Form":{"main":[[{"node":"Settings","type":"main","index":0}]]},"Settings":{"main":[[{"node":"Create post title and structure","type":"main","index":0}]]},"Wikipedia":{"ai_tool":[[{"node":"Create post title and structure","type":"ai_tool","index":0}]]},"Upload media":{"main":[[{"node":"Set image ID for the post","type":"main","index":0}]]},"Post on Wordpress":{"main":[[{"node":"Generate featured image","type":"main","index":0}]]},"Final article text":{"main":[[{"node":"Post on Wordpress","type":"main","index":0}]]},"Split out chapters":{"main":[[{"node":"Merge chapters title and text","type":"main","index":1},{"node":"Create chapters text","type":"main","index":0}]]},"Create chapters text":{"main":[[{"node":"Merge chapters title and text","type":"main","index":0}]]},"Check data consistency":{"main":[[{"node":"Split out chapters","type":"main","index":0}],[{"node":"Respond: Error","type":"main","index":0}]]},"Generate featured image":{"main":[[{"node":"Upload media","type":"main","index":0}]]},"Set image ID for the post":{"main":[[{"node":"Respond: Success","type":"main","index":0}]]},"Merge chapters title and text":{"main":[[{"node":"Final article text","type":"main","index":0}]]},"Create post title and structure":{"main":[[{"node":"Check data consistency","type":"main","index":0}]]}},"settings":{},"staticData":null,"meta":{"templateId":"2187","templateCredsSetupCompleted":true},"pinData":{},"versionId":"926b69c0-0c89-4dea-98bd-def66b222fd5","triggerCount":0,"tags":[]},{"createdAt":"2025-03-14T08:08:16.026Z","updatedAt":"2025-03-14T08:19:52.000Z","id":"ouREsxq3dl2aGYj9","name":"My workflow 3","active":false,"isArchived":false,"nodes":[{"parameters":{"pollTimes":{"item":[{"mode":"everyMinute"}]},"filters":{}},"type":"n8n-nodes-base.gmailTrigger","typeVersion":1.2,"position":[0,0],"id":"69ae99ca-c02b-4e00-a1f9-7dbd089a93bb","name":"Gmail Trigger","credentials":{"gmailOAuth2":{"id":"9AGHFf4HGRckDBlW","name":"Gmail account"}}},{"parameters":{"operation":"get","messageId":"={{ $json.id }}","simple":false,"options":{}},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[220,0],"id":"1665a6ed-415d-40e5-aeab-c142afe326e5","name":"Gmail","webhookId":"eff76980-0e5c-4548-98d8-ee93363dd873","credentials":{"gmailOAuth2":{"id":"9AGHFf4HGRckDBlW","name":"Gmail account"}}}],"connections":{"Gmail Trigger":{"main":[[{"node":"Gmail","type":"main","index":0}]]},"Gmail":{"main":[[]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"6d3997cf-9038-4457-9c06-768de257a3df","triggerCount":0,"tags":[]},{"createdAt":"2025-03-14T13:28:03.970Z","updatedAt":"2025-03-14T13:28:03.970Z","id":"6OLHQJFUj8EpMghN","name":"My workflow 4","active":false,"isArchived":false,"nodes":[{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[0,0],"id":"19275b56-14a1-45d2-a13f-ac43ff209f82","name":"When chat message received","webhookId":"17ce26e6-b478-4a13-9ecd-52e20ae9aadc"},{"parameters":{"options":{"systemMessage":"you are an expert on ESG. your job is to write article based on below guidelines.\n-Generate an ESG report outline for a renewable energy company, including key metrics and sections.\n-Summarize the latest trends in ESG reporting for the technology sector.\n-List five important ESG performance indicators relevant to the financial industry.\n-Create a sample ESG report for a manufacturing company focused on sustainability practices.\n-What are common challenges faced by companies in ESG reporting and how to address them?"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.8,"position":[220,0],"id":"14efee18-e294-4df9-958e-e4e3c170dbcf","name":"AI Agent"},{"parameters":{"modelName":"models/gemma-3-27b-it","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[120,180],"id":"58ff236d-2e80-4359-b581-44e39306fe50","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"DT6tCE7eOCxH9sdQ","name":"Google Gemini(PaLM) Api account"}}},{"parameters":{"contextWindowLength":10},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[260,180],"id":"d6e591a8-d9f0-484f-b718-d78bed256490","name":"Simple Memory"}],"connections":{"When chat message received":{"main":[[]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"8d466998-9f54-48a1-975f-814cb451ee34","triggerCount":0,"tags":[]},{"createdAt":"2025-03-14T20:02:59.382Z","updatedAt":"2025-03-14T20:02:59.382Z","id":"wq7vHuOgAWhy96pl","name":"Easy Image Captioning with Gemini 1.5 Pro","active":false,"isArchived":false,"nodes":[{"id":"0b64edf1-57e0-4704-b78c-c8ab2b91f74d","name":"When clicking ‘Test workflow’","type":"n8n-nodes-base.manualTrigger","position":[980,460],"parameters":{},"typeVersion":1},{"id":"a875d1c5-ccfe-4bbf-b429-56a42b0ca778","name":"Google Gemini Chat Model","type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","position":[1780,880],"parameters":{"options":{},"modelName":"models/gemini-1.5-flash"},"credentials":{"googlePalmApi":{"id":"DT6tCE7eOCxH9sdQ","name":"Google Gemini(PaLM) Api account"}},"typeVersion":1},{"id":"a5e00543-dbaa-4e62-afb0-825ebefae3f3","name":"Structured Output Parser","type":"@n8n/n8n-nodes-langchain.outputParserStructured","position":[1980,880],"parameters":{"jsonSchemaExample":"{\n\t\"caption_title\": \"\",\n\t\"caption_text\": \"\"\n}"},"typeVersion":1.2},{"id":"bb9af9c6-6c81-4e92-a29f-18ab3afbe327","name":"Get Info","type":"n8n-nodes-base.editImage","position":[1600,560],"parameters":{"operation":"information"},"typeVersion":1},{"id":"8a0dbd5d-5886-484a-80a0-486f349a9856","name":"Resize For AI","type":"n8n-nodes-base.editImage","position":[1600,720],"parameters":{"width":512,"height":512,"options":{},"operation":"resize"},"typeVersion":1},{"id":"d29f254a-5fa3-46fa-b153-19dfd8e8c6a7","name":"Calculate Positioning","type":"n8n-nodes-base.code","position":[2520,880],"parameters":{"mode":"runOnceForEachItem","jsCode":"const { size, output } = $input.item.json;\n\nconst lineHeight = 35;\nconst fontSize = Math.round(size.height / lineHeight);\nconst maxLineLength = Math.round(size.width/fontSize) * 2;\nconst text = `\"${output.caption_title}\". ${output.caption_text}`;\nconst numLinesOccupied = Math.round(text.length / maxLineLength);\n\nconst verticalPadding = size.height * 0.02;\nconst horizontalPadding = size.width * 0.02;\nconst rectPosX = 0;\nconst rectPosY = size.height - (verticalPadding * 2.5) - (numLinesOccupied * fontSize);\nconst textPosX = horizontalPadding;\nconst textPosY = size.height - (numLinesOccupied * fontSize) - (verticalPadding/2);\n\nreturn {\n  caption: {\n    fontSize,\n    maxLineLength,\n    numLinesOccupied,\n    rectPosX,\n    rectPosY,\n    textPosX,\n    textPosY,\n    verticalPadding,\n    horizontalPadding,\n  }\n}\n"},"typeVersion":2},{"id":"12a7f2d6-8684-48a5-aa41-40a8a4f98c79","name":"Apply Caption to Image","type":"n8n-nodes-base.editImage","position":[2880,720],"parameters":{"options":{},"operation":"multiStep","operations":{"operations":[{"color":"=#0000008c","operation":"draw","endPositionX":"={{ $json.size.width }}","endPositionY":"={{ $json.size.height }}","startPositionX":"={{ $json.caption.rectPosX }}","startPositionY":"={{ $json.caption.rectPosY }}"},{"font":"/usr/share/fonts/truetype/msttcorefonts/Arial.ttf","text":"=\"{{ $json.output.caption_title }}\". {{ $json.output.caption_text }}","fontSize":"={{ $json.caption.fontSize }}","fontColor":"#FFFFFF","operation":"text","positionX":"={{ $json.caption.textPosX }}","positionY":"={{ $json.caption.textPosY }}","lineLength":"={{ $json.caption.maxLineLength }}"}]}},"typeVersion":1},{"id":"4d569ec8-04c2-4d21-96e1-86543b26892d","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","position":[380,240],"parameters":{"width":423.75,"height":431.76353488372104,"content":"## Try it out!\n\n### This workflow takes an image and generates a caption for it using AI. The OpenAI node has been able to do this for a while but this workflow demonstrates how to achieve the same with other multimodal vision models such as Google's Gemini.\n\nAdditional, we'll use the Edit Image node to overlay the generated caption onto the image. This can be useful for publications or can be repurposed for copyrights and/or watermarks.\n\n### Need Help?\nJoin the [Discord](https://discord.com/invite/XPKeKXeB7d) or ask in the [Forum](https://community.n8n.io/)!\n"},"typeVersion":1},{"id":"45d37945-5a7a-42eb-8c8c-5940ea276072","name":"Merge Image & Caption","type":"n8n-nodes-base.merge","position":[2120,560],"parameters":{"mode":"combine","options":{},"combineBy":"combineByPosition"},"typeVersion":3},{"id":"53a26842-ad56-4c8d-a59d-4f6d3f9e2407","name":"Merge Caption & Positions","type":"n8n-nodes-base.merge","position":[2700,720],"parameters":{"mode":"combine","options":{},"combineBy":"combineByPosition"},"typeVersion":3},{"id":"b6c28913-b16a-4c59-aa49-47e9bb97f86d","name":"Get Image","type":"n8n-nodes-base.httpRequest","position":[1180,460],"parameters":{"url":"https://images.pexels.com/photos/1267338/pexels-photo-1267338.jpeg?auto=compress&cs=tinysrgb&w=600","options":{}},"typeVersion":4.2},{"id":"6c25054d-8103-4be9-bea7-6c3dd47f49a3","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","position":[840,240],"parameters":{"color":7,"width":586.25,"height":486.25,"content":"## 1. Import an Image \n[Read more about the HTTP request node](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.httprequest)\n\nFor this demonstration, we'll grab an image off Pexels.com - a popular free stock photography site - by using the HTTP request node to download.\n\nIn your own workflows, this can be replaces by other triggers such as webhooks."},"typeVersion":1},{"id":"d1b708e2-31c3-4cd1-a353-678bc33d4022","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","position":[1460,300],"parameters":{"color":7,"width":888.75,"height":783.75,"content":"## 2. Using Vision Model to Generate Caption\n[Learn more about the Basic LLM Chain](https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.chainllm)\n\nn8n's basic LLM node supports multimodal input by allowing you to specify either a binary or an image url to send to a compatible LLM. This makes it easy to start utilising this powerful feature for visual classification or OCR tasks which have previously depended on more dedicated OCR models.\n\nHere, we've simply passed our image binary as a \"user message\" option, asking the LLM to help us generate a caption title and text which is appropriate for the given subject. Once generated, we'll pass this text along with the image to combine them both."},"typeVersion":1},{"id":"36a39871-340f-4c44-90e6-74393b9be324","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","position":[2380,440],"parameters":{"color":7,"width":753.75,"height":635,"content":"## 3. Overlay Caption on Image \n[Read more about the Edit Image node](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.editimage)\n\nFinally, we’ll perform some basic calculations to place the generated caption onto the image. With n8n's user-friendly image editing features, this can be done entirely within the workflow!\n\nThe Code node tool is ideal for these types of calculations and is used here to position the caption at the bottom of the image. To create the overlay, the Edit Image node enables us to insert text onto the image, which we’ll use to add the generated caption."},"typeVersion":1},{"id":"d175fe97-064e-41da-95fd-b15668c330c4","name":"Sticky Note4","type":"n8n-nodes-base.stickyNote","position":[3160,440],"parameters":{"width":563.75,"height":411.25,"content":"**FIG 1.** Example input image with AI generated caption\n![Example Output](https://res.cloudinary.com/daglih2g8/image/upload/f_auto,q_auto/v1/n8n-workflows/l5xbb4ze4wyxwwefqmnc#full-width)"},"typeVersion":1},{"id":"23db0c90-45b6-4b85-b017-a52ad5a9ad5b","name":"Image Captioning Agent","type":"@n8n/n8n-nodes-langchain.chainLlm","position":[1780,720],"parameters":{"text":"Generate a caption for this image.","messages":{"messageValues":[{"message":"=You role is to provide an appropriate image caption for user provided images.\n\nThe individual components of a caption are as follows: who, when, where, context and miscellaneous. For a really good caption, follow this template: who + when + where + context + miscellaneous\n\nGive the caption a punny title."},{"type":"HumanMessagePromptTemplate","messageType":"imageBinary"}]},"promptType":"define","hasOutputParser":true},"typeVersion":1.4}],"connections":{"Get Info":{"main":[[{"node":"Merge Image & Caption","type":"main","index":0}]]},"Get Image":{"main":[[{"node":"Resize For AI","type":"main","index":0},{"node":"Get Info","type":"main","index":0}]]},"Resize For AI":{"main":[[{"node":"Image Captioning Agent","type":"main","index":0}]]},"Calculate Positioning":{"main":[[{"node":"Merge Caption & Positions","type":"main","index":1}]]},"Merge Image & Caption":{"main":[[{"node":"Calculate Positioning","type":"main","index":0},{"node":"Merge Caption & Positions","type":"main","index":0}]]},"Image Captioning Agent":{"main":[[{"node":"Merge Image & Caption","type":"main","index":1}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"Image Captioning Agent","type":"ai_languageModel","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"Image Captioning Agent","type":"ai_outputParser","index":0}]]},"Merge Caption & Positions":{"main":[[{"node":"Apply Caption to Image","type":"main","index":0}]]},"When clicking ‘Test workflow’":{"main":[[{"node":"Get Image","type":"main","index":0}]]}},"settings":null,"staticData":null,"meta":{"templateId":"2418"},"pinData":null,"versionId":"96174ac8-bd71-427d-bbad-df64fd38ade8","triggerCount":0,"tags":[]},{"createdAt":"2025-03-14T20:07:23.082Z","updatedAt":"2025-06-25T16:05:52.000Z","id":"Y97O6Y0TCbwx4YwJ","name":"Main_Blog","active":true,"isArchived":false,"nodes":[{"parameters":{"rule":{"interval":[{"field":"cronExpression","expression":"2 1 * * 2"}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[100,500],"id":"cf571d5d-79d8-495a-be11-b2da30fa996c","name":"Schedule Trigger"},{"parameters":{"documentId":{"__rl":true,"value":"1Ba5i-q5bHaRdZ1_8bWCsFAheS2qRBp06vKJlTBtIGHY","mode":"list","cachedResultName":"sd_SEO_plan","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Ba5i-q5bHaRdZ1_8bWCsFAheS2qRBp06vKJlTBtIGHY/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Pillar Post 1 Name","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Ba5i-q5bHaRdZ1_8bWCsFAheS2qRBp06vKJlTBtIGHY/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"Completed","lookupValue":"No"}]},"options":{"returnFirstMatch":true}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[320,500],"id":"4ba5097a-98fc-4f63-aae4-717bd6775ad9","name":"Grab New Cluster","credentials":{"googleSheetsOAuth2Api":{"id":"OeljOdvXdxB0l830","name":"Google Sheets account 2"}}},{"parameters":{"modelId":{"__rl":true,"value":"deepseek/deepseek-chat-v3-0324:free","mode":"id"},"messages":{"values":[{"content":"=You are a content strategist on a team that produces world-class blog posts optimized for SEO and user value.\n\nFor each blog project, you will be given:\n- **Keywords** – Terms the blog must rank for. These define the topic and must appear naturally throughout the post.\n- **Primary Keyword** – The most important keyword. This must appear in the **title** and **opening paragraph**, and must guide the central theme of the post.\n- **Search Intent** – Describes what the user hopes to achieve with this search. Your plan must align closely with this.\n\nYour task is to:\n1. Understand the **goal** of the blog post.\n2. Identify the **key discussion points** and **logical flow** of the content.\n3. Generate a **blog structure outline** that:\n   - Reflects a logical, engaging progression of ideas.\n   - Ensures all keywords are contextually incorporated.\n   - Fully satisfies the search intent.\n\n### Output Format:\nUse **bullet points** under clear section headers. Each bullet should reflect a content block or paragraph idea. Include:\n- **Section Title**\n- **Key Points to Cover**\n- **Keywords to Include** (where relevant)\n- Optional: **Internal links** or **CTA ideas** \n\n**Constraints:**\n- Keep the outline appropriate for a ~1000–1200 word blog post.\n- Use a **conversational, informative tone** unless stated otherwise.\n- Do **not** write the blog post — only provide the **outline plan**.\n\n### Input:\n- **Keywords**: {{ $json.Keywords }}\n- **Primary Keyword**: {{ $json['Primary Keyword'] }}\n- **Search Intent**:{{ $json.Intent }}\n\n\n\nCreate the preliminary plan."}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[540,500],"id":"3afecda9-56d0-462f-abfe-2af924d80029","name":"Preliminary Plan","credentials":{"openAiApi":{"id":"qiFABM1U6Lbzp4tI","name":"OpenAi_router"}}},{"parameters":{"assignments":{"assignments":[{"id":"23b8e8c4-9191-415a-9661-1b60d413528a","name":"research","value":"={{ $json.choices[0].message.content.replaceAll(\"[1]\", \" - source: \" +$json.citations[0]).replaceAll(\"[2]\",\" source:\" +$json.citations[1]).replaceAll(\"[3]\",\" - source: \" +$json.citations[2]).replaceAll(\"[4]\",\" - source: \"+$json.citations[3]).replaceAll(\"[5]\",\" - source: \"+$json.citations[4]).replaceAll(\"[6]\",\" - source: \"+$json.citations[5]).replaceAll(\"[7]\",\" - source: \"+$json.citations[6]).replaceAll(\"[8]\",\" - source: \"+$json.citations[7]).replaceAll(\"[9]\",\" - source: \"+$json.citations[8]).replaceAll(\"[10]\",\" - source: \"+$json.citations[9]) }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1060,500],"id":"972f9c8b-a3df-498b-8581-0b852b32a9ea","name":"Fix Links"},{"parameters":{"modelId":{"__rl":true,"value":"mistralai/mistral-nemo:free","mode":"id"},"messages":{"values":[{"content":"=You are a senior content strategist on a team that creates high-performing, SEO-optimized blog posts.\n\nFor each blog post project, you are given:\n- **Keywords** – These must be included throughout the blog naturally.\n- **Primary Keyword** – The most important keyword. It must appear in the title and introduction.\n- **Search Intent** – What the user is trying to achieve with this search.\n- **Research Findings** – Reputable research with source URLs to use as references.\n- **Preliminary Plan** – A rough draft outline from your colleague.\n\n### Your task:\nUse the above inputs to create a **detailed blog post plan** suitable for a ~1200-word article.\n\n### Output Format:\nUse the following structure for each blog section:\n- **Section Title**\n- **Section Purpose**: Explain what the section achieves.\n- **Key Points to Cover**: List the points in full detail (write technical explanations, not placeholders).\n- **Keywords to Include**: List which keywords should appear in this section and where.\n- **Research to Reference**: Include relevant research points and their source URLs.\n\nEnsure the plan:\n- Follows a logical, engaging structure that flows smoothly.\n- Covers all critical aspects of the topic to satisfy the search intent fully.\n- Uses **all** keywords and research findings appropriately.\n- Can be followed by a **non-expert writer** to draft the blog post.\n- Incorporates definitions, examples, and contextual explanations where necessary.\n\n**Your output must only be the detailed plan and nothing else.**\n\n---\n\nA new project has just came across your desk with below details:\n\nKeywords: \n{{ $('Grab New Cluster').item.json.Keywords }} \n\nSearch intent: \n{{ $('Grab New Cluster').item.json.Intent }}\n\nPreliminary plan: \n{{ $('Preliminary Plan').item.json.message.content }}\n\nResearch findings: \n{{ $json.research }}\n\nPrimary keyword: \n{{ $('Grab New Cluster').item.json['Primary Keyword'] }}\n"}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[1260,340],"id":"761300bf-5df2-4168-8a91-39c9dd51b079","name":"Create plan","credentials":{"openAiApi":{"id":"qiFABM1U6Lbzp4tI","name":"OpenAi_router"}}},{"parameters":{"modelId":{"__rl":true,"value":"anthropic/claude-3-opus","mode":"id"},"messages":{"values":[{"content":"=You are part of a team that creates world-class blog posts.\n\nYou are the team's best copywriter and responsible for writing the actual blog post. For each new blog post project, you are provided with:\n\n- A **detailed blog plan**, which outlines the structure, keyword mapping, and key talking points\n- A set of **research findings**, including reputable source links\n\n---\n\n## 🧠 Your Objective\n\nWrite the **entire blog post draft** in a single output.\n\n### You must:\n- **Follow the plan section-by-section.** Each blog section must map 1:1 with the plan. Do not merge, omit, or rearrange sections.\n- **Use the specified keywords in each section**, naturally and strategically.\n- **Include one keyword in each section heading.**\n- **Use the primary keyword in the blog title, H1 header, and the first paragraph of the introduction.**\n- **Sprinkle synonyms and Latent Semantic Indexing (LSI) keywords** where relevant for better SEO and context.\n- **Integrate the research findings**:\n  - Paraphrase or summarize each relevant point\n  - Insert a **Markdown-style hyperlink** at the end of each relevant sentence or paragraph\n  - Use the **related keyword as anchor text** (e.g., `[keyword](https://source.com)`)\n- **Use bullet points and subheadings** where it improves clarity or readability.\n- **Be direct, value-dense, and informative. Avoid fluff.**\n- **Maintain a clear, confident, professional tone. Assume the reader is smart but not an expert.**\n- **Ensure the blog post is at least 2000–2500 words long.**\n\nIf output is truncated, continue immediately until the entire post is complete.\n\nHere are the details of your next blog post project: \n\nDetailed Plan: \n{{ $json.message.content }}\n\nDetailed Research: \n{{ $('Fix Links').item.json.research }}\n\n\nWrite the blog post."}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[1560,340],"id":"0fe4b5ed-9c51-40b4-8b55-6229bd929d57","name":"Write Blog","credentials":{"openAiApi":{"id":"qiFABM1U6Lbzp4tI","name":"OpenAi_router"}}},{"parameters":{"documentId":{"__rl":true,"value":"1dJOK6XNq2cATsMnfUFo5vksu6ck-0zOoZHAD5Ua4B8s","mode":"list","cachedResultName":"previous_posts","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1dJOK6XNq2cATsMnfUFo5vksu6ck-0zOoZHAD5Ua4B8s/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1dJOK6XNq2cATsMnfUFo5vksu6ck-0zOoZHAD5Ua4B8s/edit#gid=0"},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[1880,340],"id":"0eaaffdd-4c80-442c-9bc2-0c0587b03df4","name":"Previous Posts","credentials":{"googleSheetsOAuth2Api":{"id":"OeljOdvXdxB0l830","name":"Google Sheets account 2"}}},{"parameters":{"modelId":{"__rl":true,"value":"mistralai/mistral-nemo:free","mode":"id"},"messages":{"values":[{"content":"=You are part of a team that creates world-class blog posts.\n\nYou are in charge of **adding contextual blog links** between related posts.\n\nYour job is to go through the current blog post and insert **5 to 7 relevant blog links** from previously published posts on www.editingdestiny.duckdns.org.\n\n---\n\n## 🔍 How to Identify Linking Opportunities:\n\nYou are provided with:\n- The **current blog post** \n- A list of previous blog posts**\n\nTo determine the best places to link:\n\n1. Review the keywords and summaries of the previous blog posts.\n2. If a previous blog post is **highly relevant** to a specific part of the current post and would add value for the reader:\n   - Select a sentence or phrase in that section that fits the linked content.\n   - That is a valid place to link the previous post.\n\n⚠️ Only link when the topic match is strong. Do not force a link if it isn’t clearly relevant or helpful.\n\n---\n\n## 🛠️ How to Add the Blog Links:\n\n- Place the link to the related post **immediately after the relevant sentence or phrase**.\n- Use the format: (www.editingdestiny.duckdns.org/**)\n\n\n- Do not add extra explanation or annotations. Just the raw link in brackets after the sentence.\n\n---\n\n## 🚫 Do Not Touch:\n\n- **Do NOT delete, modify, or overwrite any existing content or structure in the blog post.**\n- **Do NOT touch any existing research links**, such as:\n- `(Source: https://...)`\n- `[Research Link](https://...)`\n\nThese links are critical and must remain exactly as they are.\n\n---\n\n## ✅ Output Instructions:\n\n- Output the **full blog post**, exactly as it was, but with your blog links inserted where appropriate.\n- Do NOT include the list of previous blog posts in your output.\n- Do NOT explain the changes — just output the updated blog post.\n\n---\n\n## 📥 Inputs:\n\nCurrent blog Post: \n{{ $('Write Blog').last().json.message.content }}\n\nPrevious Blog Posts: \n{{ $json['previous-posts'].toJsonString().split() }}\n\n"}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[2160,400],"id":"10fae0be-8436-4207-b123-8cd5b733a610","name":"Add internal links","credentials":{"openAiApi":{"id":"qiFABM1U6Lbzp4tI","name":"OpenAi_router"}}},{"parameters":{"modelId":{"__rl":true,"value":"qwen/qwq-32b:free","mode":"id"},"messages":{"values":[{"content":"=Create a slug for the following blog post: \n{{ $('Add internal links').item.json.message.content }}\n\nA slug in a blog post is the part of the URL that comes after the domain name and identifies a specific page. It is typically a short, descriptive phrase that summarizes the content of the post, making it easier for users and search engines to understand what the page is about. For example, in the URL www.example.com/intelligent-agents, the slug is intelligent-agents. A good slug is concise, contains relevant keywords, and avoids unnecessary words to improve readability and SEO. \n\nThe slug must be 4 or 5 words max and must include the primary keyword of the blog post which is {{ $('Grab New Cluster').last().json['Primary Keyword'] }}.\n\nYour output must be the slug and nothing else so that I can copy and paste your output and put it at the end of my blog post URL to post it right away. "}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[2820,560],"id":"6194b2f1-9934-4f5f-9686-34b8621d0ff6","name":"Slug","credentials":{"openAiApi":{"id":"qiFABM1U6Lbzp4tI","name":"OpenAi_router"}}},{"parameters":{"modelId":{"__rl":true,"value":"deepseek/deepseek-r1:free","mode":"id"},"messages":{"values":[{"content":"=Extract the blog post title from the following blog post: \n{{ $('Add internal links').item.json.message.content }}\n\n\n\nThe blog post title must include the primary keyword {{ $('Grab New Cluster').last().json['Primary Keyword'] }} and must inform the users right away of what they can expect from reading the blog post. \n\n- Don't put the output in \"\". The output should just text with no markdown or formatting. \n\nYour output must only be the blog post title and nothing else. "}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[3120,560],"id":"6797d131-94db-4c80-8d5b-130e7f7bdb6c","name":"Title","credentials":{"openAiApi":{"id":"qiFABM1U6Lbzp4tI","name":"OpenAi_router"}}},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-2024-11-20","mode":"list","cachedResultName":"GPT-4O-2024-11-20"},"messages":{"values":[{"content":"=Create a good meta description for the following blog post: \n\n{{ $('Add internal links').item.json.message.content }}\n\nA good meta description for a blog post that is SEO-optimized should:\n- Be Concise: Stick to 150-160 characters to ensure the full description displays in search results. \n- Include Keywords: Incorporate primary keywords naturally to improve visibility and relevance to search queries.\n\nPrimary keyword = {{ $('Grab New Cluster').last().json['Primary Keyword'] }}\n\nMore keywords to include if possible = [{{ $('Grab New Cluster').last().json.Keywords }}]\n\n- Provide Value: Clearly describe what the reader will learn or gain by clicking the link. \n\n- Be Engaging: Use persuasive language, such as action verbs or a question, to encourage clicks. \n\n- Align with Content: Ensure the description accurately reflects the blog post to meet user expectations and reduce bounce rates. \n\nYour output must only be the meta description and nothing else. \n"}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[3440,560],"id":"9a21cc31-6ba7-4022-ae7a-f8565fc43433","name":"Meta description","credentials":{"openAiApi":{"id":"qiFABM1U6Lbzp4tI","name":"OpenAi_router"}}},{"parameters":{"modelId":{"__rl":true,"value":"anthropic/claude-3.7-sonnet","mode":"list","cachedResultName":"ANTHROPIC/CLAUDE-3.7-SONNET"},"messages":{"values":[{"content":"=DO NOT OUTPUT ANYTHING OTHER THAN THE CODE. I want you to follow the layout of the template as a guide to generate the WordPress code for a blog post. Here are the rules to follow:\n\nThe blog post should have a title, estimated reading time, key takeaways, table of contents, body, and FAQ in this order.\nMake it engaging by using italics, dot points, quotes, bold, spaces, and sometimes new lines. Never use emojis.\nThe blog post will have some URLs referenced next to certain keyphrases to show where the info came from. You must hyperlink the keyphrase with the provided URL so that the reader can click on the referenced URL. It is critical you get this right.\nWrap the entire content in a container <div> with inline CSS that sets the text color to white (#ffffff), uses a legible font such as Arial, sans-serif, and sets line-height to 1.6.\nEnsure that all non-heading text elements (e.g., paragraphs, list items) have an inline style or embedded style that sets their font size to 20px and color to white (#ffffff) using !important to override theme styles.\nHyperlinks, points in the table of contents, and FAQ questions must be styled in blue (#00c2ff).\nAll headings and subheadings should have an underline implemented via a bottom border in blue (#00c2ff) with appropriate padding.\nPlace a double break (<br><br>) between each section to improve readability.\nDo not output any extra text or mention code tags like HTML''' around the output; just output the HTML code.\nBlog post: \n\n{{ $json.message.content }}\n\nHere's an example of a well formatted output:\n\n<div style=\"color: #ffffff; font-family: Arial, sans-serif; line-height: 1.6;\"> <style> p, .wp-block-paragraph, ul.wp-block-list, li { color: #ffffff !important; font-size: 20px !important; } a { color: #00c2ff !important; } </style> <h1 id=\"h-devin-ai-the-hype-and-reality-of-an-ai-software-engineer\" class=\"wp-block-heading\" style=\"border-bottom: 2px solid #00c2ff; padding-bottom: 5px;\">Devin AI: The Hype and Reality of an AI Software Engineer</h1> <br><br> <p class=\"estimated-reading-time\" style=\"color: #ffffff; font-size: 20px !important;\">Estimated reading time: 5 minutes</p> <br><br> <h2 id=\"h-key-takeaways\" class=\"wp-block-heading\" style=\"border-bottom: 2px solid #00c2ff; padding-bottom: 5px;\"><strong>Key Takeaways</strong></h2> <br><br> <ul class=\"wp-block-list\"> <li><mark style=\"background-color: #ffd966;\"><strong>Devin AI</strong></mark> claims to be the world's first fully autonomous AI software engineer.</li> <br><br> <li>Initial demos and claims have generated significant <mark style=\"background-color: #ffff00;\">hype</mark> and interest.</li> <br><br> <li>Critics argue some capabilities may be exaggerated or misleading.</li> <br><br> <li>Real-world testing reveals both <em>strengths</em> and <em>limitations</em>.</li> <br><br> <li>The true impact on software engineering remains to be seen.</li> </ul> <br><br> <div class=\"wp-block-yoast-seo-table-of-contents yoast-table-of-contents\"> <h2 style=\"color: #ffffff; border-bottom: 2px solid #00c2ff; padding-bottom: 5px;\">Table of contents</h2> <br><br> <ul> <li><a href=\"#h-devin-ai-the-hype-and-reality-of-an-ai-software-engineer\" data-level=\"1\">Devin AI: The Hype and Reality of an AI Software Engineer</a></li> <br><br> <li><a href=\"#h-key-takeaways\" data-level=\"2\">Key Takeaways</a></li> <br><br> <li><a href=\"#h-what-is-devin-ai\" data-level=\"2\">What is Devin AI?</a></li> <br><br> <li><a href=\"#h-the-hype-around-devin-ai\" data-level=\"2\">The Hype Around Devin AI</a></li> <br><br> <li><a href=\"#h-putting-devin-to-the-test\" data-level=\"2\">Putting Devin to the Test</a></li> <br><br> <li><a href=\"#h-the-reality-check\" data-level=\"2\">The Reality Check</a></li> <br><br> <li><a href=\"#h-the-future-of-ai-in-software-development\" data-level=\"2\">The Future of AI in Software Development</a></li> <br><br> <li><a href=\"#h-frequently-asked-questions\" data-level=\"2\">Frequently Asked Questions</a></li> </ul> </div> <br><br> <p>Devin AI has burst onto the tech scene, promising to revolutionize software development as we know it. But does this AI-powered coding assistant live up to the hype? Let's dive into what Devin AI really is, what it can do, and what developers are saying after putting it to the test.</p> <br><br> <!-- Rest of blog post content goes here --> </div>\n"}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[2500,400],"id":"02dd9bf3-9d8a-4445-b9ad-a3dc94eb651b","name":"HTML version","credentials":{"openAiApi":{"id":"qiFABM1U6Lbzp4tI","name":"OpenAi_router"}}},{"parameters":{"url":"https://www.searchapi.io/api/v1/search","sendQuery":true,"queryParameters":{"parameters":[{"name":"engine","value":"=google_images"},{"name":"q","value":"={{ $json.message.content }}"},{"name":"api_key","value":"SuQupWf7A8fv6HisQsEm6ihg"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[3780,660],"id":"d544e947-1b2d-4a8c-bf99-61a77500c565","name":"Image Covers"},{"parameters":{"assignments":{"assignments":[{"id":"1f0541df-05ab-4e3d-a5d8-3904579fc8a9","name":"image-url","value":"={{ $json.selectedImageUrl }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[4400,660],"id":"b55759b5-a97e-4727-bdcc-c530c1e0158f","name":"Edit Fields"},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1Ba5i-q5bHaRdZ1_8bWCsFAheS2qRBp06vKJlTBtIGHY","mode":"list","cachedResultName":"sd_SEO_plan","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Ba5i-q5bHaRdZ1_8bWCsFAheS2qRBp06vKJlTBtIGHY/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Pillar Post 1 Name","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Ba5i-q5bHaRdZ1_8bWCsFAheS2qRBp06vKJlTBtIGHY/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"Primary Keyword":"={{ $('Grab New Cluster').item.json[\"Primary Keyword\"] }}","Completed":"Yes"},"matchingColumns":["Primary Keyword"],"schema":[{"id":"Cluster","displayName":"Cluster","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Intent","displayName":"Intent","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Keywords","displayName":"Keywords","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Primary Keyword","displayName":"Primary Keyword","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Completed","displayName":"Completed","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"readOnly":true,"removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[4720,800],"id":"63beda0b-aff2-4189-ad48-2186ff3b2981","name":"Check as completed on Sheets","credentials":{"googleSheetsOAuth2Api":{"id":"OeljOdvXdxB0l830","name":"Google Sheets account 2"}}},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1dJOK6XNq2cATsMnfUFo5vksu6ck-0zOoZHAD5Ua4B8s","mode":"list","cachedResultName":"previous_posts","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1dJOK6XNq2cATsMnfUFo5vksu6ck-0zOoZHAD5Ua4B8s/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1dJOK6XNq2cATsMnfUFo5vksu6ck-0zOoZHAD5Ua4B8s/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"Keywords":"={{ $('Grab New Cluster').last().json.Keywords }}","URL":"=https://editingdestiny.duckdns.org/{{ $('Slug').item.json.message.content }}","Blog Title":"={{$('Title').item.json.message.content}}","Summary":"={{ $('Meta description').item.json.message.content }}"},"matchingColumns":[],"schema":[{"id":"Blog Title","displayName":"Blog Title","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Keywords","displayName":"Keywords","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Summary","displayName":"Summary","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"URL","displayName":"URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[4880,800],"id":"8fedb3cb-5b77-46d5-b89e-570d9d8e8776","name":"Google Sheets","credentials":{"googleSheetsOAuth2Api":{"id":"OeljOdvXdxB0l830","name":"Google Sheets account 2"}}},{"parameters":{"content":"## Schedule a trigger\n \n","height":240,"width":260},"type":"n8n-nodes-base.stickyNote","position":[20,400],"typeVersion":1,"id":"b56b054e-fdad-48ec-b677-06a27044881a","name":"Sticky Note"},{"parameters":{"content":"## New Post Info\n \n","height":240},"type":"n8n-nodes-base.stickyNote","position":[280,400],"typeVersion":1,"id":"1ac202a6-99e7-4360-b3a4-6eb745095746","name":"Sticky Note1"},{"parameters":{"content":"## Preliminary Post Plan \n \n","height":240,"width":300},"type":"n8n-nodes-base.stickyNote","position":[520,400],"typeVersion":1,"id":"6209ceb8-1a11-49db-b4dc-bec1aad6b4e3","name":"Sticky Note2"},{"parameters":{"content":"## Research\n \n \n","height":240,"width":180},"type":"n8n-nodes-base.stickyNote","position":[820,400],"typeVersion":1,"id":"c844d1bc-1581-43c3-8a2b-035b774cabf5","name":"Sticky Note3"},{"parameters":{"content":"## Post Plan \n \n","height":240,"width":300},"type":"n8n-nodes-base.stickyNote","position":[1240,260],"typeVersion":1,"id":"c49a463f-fbc3-425c-b6e1-ee52e9852f0e","name":"Sticky Note4"},{"parameters":{"content":"## Writing Blog\n \n \n","height":240,"width":300},"type":"n8n-nodes-base.stickyNote","position":[1540,260],"typeVersion":1,"id":"3a8e6891-6890-4d4e-afba-461bcf130c84","name":"Sticky Note5"},{"parameters":{"method":"POST","url":"https://api.perplexity.ai/chat/completions","authentication":"genericCredentialType","genericAuthType":"httpBearerAuth","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"sonar-pro\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"Act as a professional news researcher who is capable of finding detailed summaries about a news topic from highly reputable sources.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"{{ $json.message.content.split(/\\n+/).join(' ').replaceAll('\"', ' ') }}\"\n    }\n  ]\n}\n","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[860,500],"id":"32e5192c-5a15-4416-8e4b-da00636f7c99","name":"Research","credentials":{"httpHeaderAuth":{"id":"MmkcN4E0rsAnOCsk","name":"Header Auth account"},"httpBearerAuth":{"id":"mAOF2eT9vpIC8BZi","name":"perple"}}},{"parameters":{"content":"## Internal Links\n \n \n","height":240,"width":300},"type":"n8n-nodes-base.stickyNote","position":[2140,320],"typeVersion":1,"id":"9d599fae-c471-4fe4-a88b-929cce793074","name":"Sticky Note6"},{"parameters":{"content":"## HTML\n\n \n \n","height":240,"width":340},"type":"n8n-nodes-base.stickyNote","position":[2440,320],"typeVersion":1,"id":"1fc89b97-91c7-4a81-a3ac-c5f9110ef434","name":"Sticky Note7"},{"parameters":{"content":"## Slug\n\n\n \n \n","height":240,"width":320},"type":"n8n-nodes-base.stickyNote","position":[2780,480],"typeVersion":1,"id":"080c4e23-b6f7-4b13-8ebf-1d790051f5ca","name":"Sticky Note8"},{"parameters":{"content":"## Post Title\n\n\n \n \n","height":240,"width":300},"type":"n8n-nodes-base.stickyNote","position":[3100,480],"typeVersion":1,"id":"6137898e-173f-4c67-b481-f39c85e8ad6f","name":"Sticky Note9"},{"parameters":{"content":"## Meta Description\n\n\n \n \n","height":240,"width":300,"color":3},"type":"n8n-nodes-base.stickyNote","position":[3400,480],"typeVersion":1,"id":"4c1d4567-c31e-4a5b-aedb-3380bc8b3606","name":"Sticky Note10"},{"parameters":{"content":"## Get Image\n\n\n\n \n \n","height":240,"width":800,"color":5},"type":"n8n-nodes-base.stickyNote","position":[3740,580],"typeVersion":1,"id":"e2785ebd-7f02-4ff4-aaaa-b961852dd20d","name":"Sticky Note11"},{"parameters":{"content":"## Completion\n\n\n\n\n\n \n \n","height":240,"width":480,"color":4},"type":"n8n-nodes-base.stickyNote","position":[4560,720],"typeVersion":1,"id":"4edcbf3e-0b79-49fb-a0c7-79acd4747598","name":"Sticky Note13"},{"parameters":{"content":"# CLUSTER SEO POST\n\n \n \n","height":100,"width":500,"color":4},"type":"n8n-nodes-base.stickyNote","position":[0,0],"typeVersion":1,"id":"9dac9813-4c42-4913-b662-324efdcfbb3e","name":"Sticky Note14"},{"parameters":{"aggregate":"aggregateAllItemData","destinationFieldName":"previous-posts","options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[2020,360],"id":"f2870711-d620-41b9-90b4-aafdaabca782","name":"Aggregate"},{"parameters":{"title":"={{ $('Title').item.json.message.content }}","additionalFields":{"authorId":1,"content":"=<img src=\"{{ $json['image-url'] }}\" alt=\"Cover Image\">\n{{ $('HTML version').item.json.message.content }}","slug":"={{ $('Slug').item.json.message.content }}","status":"draft","commentStatus":"open","sticky":true,"categories":[9,11,13],"tags":[16,20,17,18],"postTemplate":{}}},"type":"n8n-nodes-base.wordpress","typeVersion":1,"position":[4580,800],"id":"fe049f33-a7a7-4463-9431-3a72f1a2a737","name":"Create a post","credentials":{"wordpressApi":{"id":"SdXAZkZVFuk8jRCL","name":"Wordpress account"}}},{"parameters":{"jsCode":"const images = $json.images?.slice(0, 5) || [];\n\nlet userPrompt = `You're selecting the best image for a blog post titled:\\n\\n\"${$json.search_parameters.q}\"\\n\\nHere are the image options:\\n\\n`;\n\nimages.forEach((img, index) => {\n  userPrompt += `${index + 1}. Title: \"${img.title}\", Source: ${img.source.name}, URL: ${img.original.link}\\n`;\n});\n\nuserPrompt += `\\nPlease return ONLY the most relevant image URL that best matches the blog theme.`;\n\n// Return full payload for OpenRouter\nreturn [\n  {\n    json: {\n      model: \"deepseek/deepseek-r1-0528:free\",\n      messages: [\n        {\n          role: \"system\",\n          content: \"You are a blog assistant that selects the best image for a blog post.\"\n        },\n        {\n          role: \"user\",\n          content: userPrompt\n        }\n      ]\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[3940,660],"id":"4fa53339-6e4e-40ce-a0be-c67066832a61","name":"Code"},{"parameters":{"method":"POST","url":"https://openrouter.ai/api/v1/chat/completions","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"Bearer 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"},{"name":"Content-Type","value":"application/json"},{"name":"HTTP-Referer","value":"https:.//sd-ai.co.uk"}]},"sendBody":true,"contentType":"raw","body":"={{ $json }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[4080,660],"id":"eafba375-814e-4fb1-99a1-d4ad7a5f6cbf","name":"HTTP Request"},{"parameters":{"jsCode":"const content = $json.choices?.[0]?.message?.content || \"\";\n\nconst urlRegex = /(https?:\\/\\/[^\\s]+)/g;\nconst matches = content.match(urlRegex);\n\nlet imageUrl = null;\n\n// Filter for image file types\nfor (const match of matches || []) {\n  if (/\\.(jpg|jpeg|png|webp)$/i.test(match)) {\n    imageUrl = match;\n    break;\n  }\n}\n\n// Fallback to first match\nif (!imageUrl && matches && matches.length > 0) {\n  imageUrl = matches[0];\n}\n\n// ✅ Sanitize the final URL\nif (imageUrl) {\n  imageUrl = imageUrl\n    .trim()\n    .replace(/[\\*\\s\"']+$/g, '') // remove trailing *, \", ', whitespace\n    .replace(/^[\\*\\s\"']+/g, ''); // remove leading *, \", ', whitespace\n}\n\nreturn [{\n  json: {\n    selectedImageUrl: imageUrl\n  }\n}];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[4260,660],"id":"7139be9a-e21f-43e7-8283-6527bcbed5d6","name":"Code1"}],"connections":{"Schedule Trigger":{"main":[[{"node":"Grab New Cluster","type":"main","index":0}]]},"Grab New Cluster":{"main":[[{"node":"Preliminary Plan","type":"main","index":0}]]},"Preliminary Plan":{"main":[[{"node":"Research","type":"main","index":0}]]},"Fix Links":{"main":[[{"node":"Create plan","type":"main","index":0}]]},"Create plan":{"main":[[{"node":"Write Blog","type":"main","index":0}]]},"Write Blog":{"main":[[{"node":"Previous Posts","type":"main","index":0}]]},"Previous Posts":{"main":[[{"node":"Aggregate","type":"main","index":0}]]},"Add internal links":{"main":[[{"node":"HTML version","type":"main","index":0}]]},"Slug":{"main":[[{"node":"Title","type":"main","index":0}]]},"Title":{"main":[[{"node":"Meta description","type":"main","index":0}]]},"HTML version":{"main":[[{"node":"Slug","type":"main","index":0}]]},"Meta description":{"main":[[{"node":"Image Covers","type":"main","index":0}]]},"Image Covers":{"main":[[{"node":"Code","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"Create a post","type":"main","index":0}]]},"Check as completed on Sheets":{"main":[[{"node":"Google Sheets","type":"main","index":0}]]},"Research":{"main":[[{"node":"Fix Links","type":"main","index":0}]]},"Aggregate":{"main":[[{"node":"Add internal links","type":"main","index":0}]]},"Create a post":{"main":[[{"node":"Check as completed on Sheets","type":"main","index":0}]]},"Code":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"HTTP Request":{"main":[[{"node":"Code1","type":"main","index":0}]]},"Code1":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Schedule Trigger":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"cad99156-825f-4458-aec0-00f73d497f4e","triggerCount":1,"tags":[]},{"createdAt":"2025-03-15T11:17:13.928Z","updatedAt":"2025-04-24T09:54:01.000Z","id":"fg3qMqUJicmEQ7J3","name":"Home_deepseek","active":true,"isArchived":false,"nodes":[{"parameters":{"method":"POST","url":"http://ollama:11434/api/generate","sendHeaders":true,"specifyHeaders":"json","jsonHeaders":"{\n  \"Content-Type\": \"application/json\"\n}","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"deepseek-r1:1.5b\",\n  \"prompt\": \"You are a helpful assistant. Please read the user message and provide a detailed thought process (thinking) and a minimal, clear, and direct answer. Both the thinking and the answer should avoid any special characters (such as quotation marks, parentheses, etc.), excessive punctuation, or unnecessary formatting. Keep both parts minimal and to the point, ensuring neither exceeds 4000 characters. Your response should be plain text with no extra characters. User message: {{ $json.body.message }}\",\n  \"stream\": false\n}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[620,-360],"id":"be865b07-feaf-408d-94c0-72275db1b7a4","name":"HTTP Request"},{"parameters":{"assignments":{"assignments":[{"id":"91ad7f1f-d620-40ed-ab66-d27170271cfc","name":"model","value":"={{ $json.model }}","type":"string"},{"id":"9c88aa98-309f-4d8c-b563-a8cbb60fb92f","name":"response","value":"={{ $json.response }}","type":"string"},{"id":"d626b3f5-db78-4315-a242-42f866c393c3","name":"done","value":"={{ $json.done }}","type":"boolean"},{"id":"2c35b5a1-eaa2-464f-b638-14c4f63a945f","name":"total_duration","value":"=    {{ $json[\"total_duration\"]/1000000000 }}","type":"number"},{"id":"fcc6bd9d-5c25-41f1-a89b-9353824edcdb","name":"Time_taken","value":"=Time taken: {{ $json[\"total_duration\"] / 1000000000 }} seconds","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[460,-320],"id":"33c12748-fddd-4ef0-a5f4-ff7ede340763","name":"Edit Fields"},{"parameters":{"jsCode":"// Get the raw response containing both the thinking and the answer\nlet response = items[0].json.response;  // Ensure using 'let' since we may modify the variables\n\n// Extract the thinking part (everything between <think> and </think>)\nlet thinkingStart = response.indexOf(\"<think>\") + \"<think>\".length;\nlet thinkingEnd = response.indexOf(\"</think>\");\nlet thinking = response.slice(thinkingStart, thinkingEnd).trim();  // Remove extra spaces or newlines\n\n// Extract the answer part (everything after </think>)\nlet answer = response.slice(thinkingEnd + \"</think>\".length).trim();  // Remove extra spaces or newlines\n\n// Clean up the thinking part by removing special characters and unwanted symbols\nthinking = thinking.replace(/[^\\w\\s.,!?-]/g, '');  // Removes special characters, keeps alphanumeric, spaces, and common punctuation\n\n// Escape any special characters that might interfere with JSON format\nthinking = thinking.replace(/([\"\\\\])/g, '\\\\$1');  // Escape quotes and backslashes in thinking\nanswer = answer.replace(/([\"\\\\])/g, '\\\\$1');  // Escape quotes and backslashes in answer\n\n// Ensure proper structure in final JSON\nconst finalResponse = {\n  thinking: thinking,  // The \"thinking\" part, properly cleaned and escaped\n  answer: answer,      // The \"answer\" part, properly cleaned and escaped\n};\n\n// Log the final response to verify correctness\nconsole.log('Final Response:', JSON.stringify(finalResponse));\n\n// Return the final response as valid JSON\nreturn [\n  {\n    json: finalResponse,\n  },\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[700,-220],"id":"d3fc1078-b986-4666-af01-6f93a68d513b","name":"Code"},{"parameters":{"httpMethod":"POST","path":"chat-ai","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-60,-300],"id":"7f7d08db-948d-4118-ab46-19b3c6cb30c2","name":"Webhook","webhookId":"43095d38-38e8-4169-9cfc-3ec6ecd6a5a9"},{"parameters":{"respondWith":"text","responseBody":"={\n\"thinking\" :\"{{ $json.thinking }}\",\n\"answer\": \"{{ $json.answer }}\"\n\n}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[1140,-220],"id":"c0e51794-477e-4fec-b462-11993795b0b0","name":"Respond to Webhook"},{"parameters":{"jsCode":"// Get the thinking and answer response from the previous node\nlet thinking = items[0].json.thinking;\nlet answer = items[0].json.answer;\n\n// Function to escape control characters\nfunction escapeControlCharacters(str) {\n    return str\n        .replace(/\\\\/g, '\\\\\\\\')  // Escape backslashes\n        .replace(/\\\"/g, '\\\\\"')    // Escape double quotes\n        .replace(/\\n/g, '\\\\n')    // Replace newlines with escaped newline\n        .replace(/\\r/g, '\\\\r')    // Replace carriage returns with escaped carriage return\n        .replace(/\\t/g, '\\\\t');   // Replace tabs with escaped tabs\n}\n\n// Escape thinking and answer\nthinking = escapeControlCharacters(thinking);\nanswer = escapeControlCharacters(answer);\n\n// Return the sanitized data\nreturn [\n    {\n        json: {\n            thinking: thinking,\n            answer: answer\n        }\n    }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[920,-220],"id":"b9bc0a16-5098-4dc3-a44a-918c612b4bba","name":"Code1"}],"connections":{"HTTP Request":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"Code","type":"main","index":0}]]},"Code":{"main":[[{"node":"Code1","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"Code1":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","timezone":"Europe/London","callerPolicy":"workflowsFromSameOwner"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"c7a84235-d268-4338-a0d9-856a1c271b83","triggerCount":1,"tags":[]},{"createdAt":"2025-03-16T09:50:17.045Z","updatedAt":"2025-05-03T14:43:19.000Z","id":"AOmOQ88896A73VjB","name":"My workflow 6","active":false,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"/test","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-1200,-260],"id":"7a6711a3-ac35-4456-89c4-0959c64c2c33","name":"Webhook","webhookId":"5a2a8000-a0c0-4a26-b8bb-16028b53247f"},{"parameters":{"respondWith":"json","responseBody":"={\n\"deepseek\":\"{{ $json.response }}\"\n}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[-260,-260],"id":"45f15662-0ebe-4d90-a9a0-99aeb130745b","name":"Respond to Webhook"},{"parameters":{"method":"POST","url":"http://ollama:11434/api/generate","sendHeaders":true,"specifyHeaders":"json","jsonHeaders":"{\n  \"Content-Type\": \"application/json\"\n}","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"gemma3:1b\",\n  \"prompt\": \"{{ $json.body.message}}\"\n}","options":{"response":{"response":{"responseFormat":"text"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-860,180],"id":"e18a407d-9490-4cb4-a836-b926c04cfe19","name":"HTTP Request (Gemma)"},{"parameters":{"method":"POST","url":"http://ollama:11434/api/generate","sendHeaders":true,"specifyHeaders":"json","jsonHeaders":"{\n  \"Content-Type\": \"application/json\"\n}","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"deepseek-r1:1.5b\",\n  \"prompt\": \"you are a helpful assistant and are responsible to provide answers to the question asked by user. You need need to analyse the {{ $json.body.notes }} and provide an answer with minimum word possible. Do not include any other details in your answer.\"\n}","options":{"response":{"response":{"responseFormat":"text"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1020,-260],"id":"ad84af2d-7b3a-4797-a599-a7c1521d2bb9","name":"HTTP Request (DeepSeek)"},{"parameters":{"jsCode":"let responses = $json[\"data\"].trim().split(\"\\n\").map(line => JSON.parse(line));\nlet fullResponse = responses.map(r => r.response).join(\"\");\n\nreturn [{ model: \"deepseek\", response: fullResponse.trim() }];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-360,40],"id":"553282a1-cf7a-49b2-9a7a-41fd56a1e7c9","name":"Code1"},{"parameters":{},"type":"n8n-nodes-base.merge","typeVersion":3,"position":[-320,180],"id":"e0c9b727-5be0-43ab-ad29-9c761ef05347","name":"Merge"},{"parameters":{"jsCode":"// Retrieve the response and model from the current input\nlet response = $json[\"response\"];\nlet model = $json[\"model\"] || \"Unknown Model\";\n\n// Ensure the response exists and is a string\nif (response && typeof response === \"string\") {\n    // Remove everything between <think>...</think> (including the <think> tags themselves)\n    let cleanedResponse = response.replace(/<think>.*?<\\/think>/gs, \"\").trim();\n\n    // Try different patterns to extract the final answer\n    let finalAnswerMatch = cleanedResponse.match(/\\\\boxed\\{(.*?)\\}/) \n                          || cleanedResponse.match(/Final Answer:\\s*(.*)/i) \n                          || cleanedResponse.match(/The capital of India is\\s*(.*?)[.\\n]/i) \n                          || cleanedResponse.match(/(?:The answer is|The result is)\\s*(.*?)[.\\n]/i);\n\n    // Extract answer if found, otherwise grab last sentence as fallback\n    let finalAnswer = finalAnswerMatch ? finalAnswerMatch[1].trim() : cleanedResponse.split('.').pop().trim();\n\n    // Remove excess spaces\n    finalAnswer = finalAnswer.replace(/\\s+/g, \" \").trim();\n\n    // Return the cleaned and processed answer\n    return [{ model: model, response: finalAnswer }];\n} else {\n    return [{ model: model, response: \"No valid response found\" }];\n}\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-100,20],"id":"4ecc54be-d9a0-4e70-b075-2295e1f6ab21","name":"Code"},{"parameters":{"jsCode":"let responses = $json[\"data\"].trim().split(\"\\n\").map(line => JSON.parse(line));\nlet fullResponse = responses.map(r => r.response).join(\"\");\n\nreturn [{ model: \"gemma\", response: fullResponse.trim() }];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-520,180],"id":"6d5b74f7-d77e-44fa-9b27-c04bc34465d8","name":"Code2"},{"parameters":{"promptType":"define","text":"={{ $json.data }}","hasOutputParser":true,"options":{"systemMessage":"=You are a helpful assistant. You need to review the  received  {{ $json.data }} and provide the answer contained in that data.please ensure there are no special characters, ''\\n' etc in your response."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.8,"position":[-840,-260],"id":"6187130c-4864-4446-97ea-4ccea3d2bddf","name":"AI Agent"},{"parameters":{"modelName":"models/gemini-2.5-pro-exp-03-25","options":{"maxOutputTokens":2048}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-840,-100],"id":"7aa55448-cffa-49f5-9bc2-75635575330d","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"DT6tCE7eOCxH9sdQ","name":"Google Gemini(PaLM) Api account"}}},{"parameters":{"jsCode":"// Retrieve the response from the AI agent\nlet aiResponse = $input.first().json.output;\n\n// Ensure the response exists\nif (aiResponse && typeof aiResponse === \"string\") {\n    // Remove unwanted characters, such as newline (\\n) and extra spaces\n    let cleanedResponse = aiResponse.replace(/\\\\n/g, \" \").trim();\n\n    // You can also apply additional cleaning or modifications here\n    // For example, replace unwanted characters like backslashes if needed\n    cleanedResponse = cleanedResponse.replace(/\\\\+/g, \"\"); // Remove extra backslashes\n\n    // Return the cleaned response\n    return [{ response: cleanedResponse }];\n} else {\n    // Return a default message if no valid response\n    return [{ response: \"No valid response found\" }];\n}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-480,-260],"id":"91919f93-cb33-41fd-86db-0b02e2b3bde0","name":"Code3"}],"connections":{"Webhook":{"main":[[{"node":"HTTP Request (DeepSeek)","type":"main","index":0}]]},"HTTP Request (Gemma)":{"main":[[{"node":"Code2","type":"main","index":0}]]},"HTTP Request (DeepSeek)":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Code1":{"main":[[{"node":"Code","type":"main","index":0}]]},"Merge":{"main":[[]]},"Code":{"main":[[]]},"Code2":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"AI Agent":{"main":[[{"node":"Code3","type":"main","index":0}]]},"Code3":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"531e7ef1-2b10-4e83-9be5-fc789e7c2b98","triggerCount":1,"tags":[]},{"createdAt":"2025-03-22T18:11:09.797Z","updatedAt":"2025-04-15T17:02:23.000Z","id":"EOw2fRstJo1GF1Pu","name":"Sub_post","active":false,"isArchived":false,"nodes":[{"parameters":{"rule":{"interval":[{"field":"cronExpression","expression":"0 8 * * 4"}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-40,400],"id":"269bda00-44ba-46ec-a9ed-3ec01819ba38","name":"Schedule Trigger"},{"parameters":{"method":"POST","url":"https://api.perplexity.ai/chat/completions","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"sonar-pro\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"Act as a professional news researcher who is capable of finding detailed summaries about a news topic from highly reputable sources.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \" Research the following topic and return everything you can find: '{{ $('Choosing Topic').item.json.message.content }}' \"\n    }\n  ]\n}\n","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1180,400],"id":"0863a1dd-2921-4f77-809a-56a7648fc0ef","name":"Research","credentials":{"httpHeaderAuth":{"id":"MmkcN4E0rsAnOCsk","name":"Header Auth account"}}},{"parameters":{"assignments":{"assignments":[{"id":"23b8e8c4-9191-415a-9661-1b60d413528a","name":"research","value":"={{ $json.choices[0].message.content.replaceAll(\"[1]\", \" - source: \" +$json.citations[0]).replaceAll(\"[2]\",\" - source:\" +$json.citations[1]).replaceAll(\"[3]\",\" - source: \" +$json.citations[2]).replaceAll(\"[4]\",\" - source: \"+$json.citations[3]).replaceAll(\"[5]\",\" - source: \"+$json.citations[4]).replaceAll(\"[6]\",\" - source: \"+$json.citations[5]).replaceAll(\"[7]\",\" - source: \"+$json.citations[6]).replaceAll(\"[8]\",\" - source: \"+$json.citations[7]).replaceAll(\"[9]\",\" - source: \"+$json.citations[8]).replaceAll(\"[10]\",\" - source: \"+$json.citations[9]) }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1400,400],"id":"a70a3f3c-65b0-4877-aae9-609449152c6a","name":"Fix Links"},{"parameters":{"aggregate":"aggregateAllItemData","destinationFieldName":"previous-posts","options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[2300,400],"id":"cda04b87-7320-4561-97cb-0c66fa3bfba6","name":"Aggregate"},{"parameters":{"documentId":{"__rl":true,"value":"1dJOK6XNq2cATsMnfUFo5vksu6ck-0zOoZHAD5Ua4B8s","mode":"list","cachedResultName":"previous_posts","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1dJOK6XNq2cATsMnfUFo5vksu6ck-0zOoZHAD5Ua4B8s/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1dJOK6XNq2cATsMnfUFo5vksu6ck-0zOoZHAD5Ua4B8s/edit#gid=0"},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[2120,400],"id":"f19c51cc-dd84-4fcc-aba6-ea8c40c8a3a5","name":"Previous Posts","credentials":{"googleSheetsOAuth2Api":{"id":"rKKreig72dpF3tcg","name":"Google Sheets account"}}},{"parameters":{"modelId":{"__rl":true,"value":"o1-mini-2024-09-12","mode":"list","cachedResultName":"O1-MINI-2024-09-12"},"messages":{"values":[{"content":"=You are part of a team that creats world class blog posts. \n\nYou are in charge of internal linking between blog posts. \n\nFor each new blog post that comes across your desk, your job is to look through previously posted blogs and make atleast 5 internal links. \n\nTo choose the best internal linking opportunities you must: \n\n- Read the previous blog post summaries and look through their keywords. If there is a match where the previous blog post is highly relevant, then this is an internal linking opportunity. \n\n- Do not link if it is not highly relevant. Only make a link if it makes sense and adds value for the reader. \n\nOnce you've found the best linking opportunities, you must update the blog post with the internal links. To do this you must: \n\n- Add the link of the previous blog post at the relevant section of the new blog post. Drop the URL at the place which makes most sense. Later we will hyperlink the URL to the word in the blog post which it is placed next to. So your placing is very important. \n\nMake sure to not delete any existing URLs or change anything about the blog post provided to you. You must only add new internal linking URLs and output the revised blog post. \n\nYour output must be the blog post given to you plus the new urls. Don't remove any info. \n\nDon't return the previous blog posts. Only return the current blog post with the internal links added.\n\nCurrent blog Post: \n{{ $('Copywriter').item.json.message.content }}\n\nPrevious Blog Posts: \n{{ $json['previous-posts'].toJsonString().split() }}\n\n"}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[2480,400],"id":"0ca2b168-2c20-4280-9d41-2d1da598ea14","name":"Add internal links","credentials":{"openAiApi":{"id":"U1pskvzZ86W4ILY6","name":"OpenAi account 2"}}},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"messages":{"values":[{"content":"=Create a slug for the following blog post: \n{{ $('Add internal links').item.json.message.content }}\n\nA slug in a blog post is the part of the URL that comes after the domain name and identifies a specific page. It is typically a short, descriptive phrase that summarizes the content of the post, making it easier for users and search engines to understand what the page is about. For example, in the URL www.example.com/intelligent-agents, the slug is intelligent-agents. A good slug is concise, contains relevant keywords, and avoids unnecessary words to improve readability and SEO. \n\nThe slug must be 4 or 5 words max and must include the primary keyword of the blog post which is {{ $('Choosing Topic').item.json.message.content }}\n\nYour output must be the slug and nothing else so that I can copy and paste your output and put it at the end of my blog post URL to post it right away. "}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[3160,400],"id":"8eee6060-982c-420f-9833-d50cc4c1a3d6","name":"Slug","credentials":{"openAiApi":{"id":"U1pskvzZ86W4ILY6","name":"OpenAi account 2"}}},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-2024-11-20","mode":"list","cachedResultName":"GPT-4O-2024-11-20"},"messages":{"values":[{"content":"=Extract the blog post title from the following blog post: \n{{ $('Add internal links').item.json.message.content }}\n\n\n\nThe blog post title must include the primary keyword '{{ $('Choosing Topic').item.json.message.content }}' and must inform the users right away of what they can expect from reading the blog post. \n\n- Don't put the output in \"\". The output should just text with no markdown or formatting. \n\nYour output must only be the blog post title and nothing else. "}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[3460,400],"id":"a30e6426-a238-4a56-8ac9-5789d792b34c","name":"Title","credentials":{"openAiApi":{"id":"U1pskvzZ86W4ILY6","name":"OpenAi account 2"}}},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-2024-11-20","mode":"list","cachedResultName":"GPT-4O-2024-11-20"},"messages":{"values":[{"content":"=Create a good meta description for the following blog post: \n\n{{ $('Add internal links').item.json.message.content }}\n\nA good meta description for a blog post that is SEO-optimized should:\n- Be Concise: Stick to 150-160 characters to ensure the full description displays in search results. \n- Include Keywords: Incorporate primary keywords naturally to improve visibility and relevance to search queries.\n\nPrimary keyword = {{ $('Choosing Topic').item.json.message.content }}\n\n\n- Provide Value: Clearly describe what the reader will learn or gain by clicking the link. \n\n- Be Engaging: Use persuasive language, such as action verbs or a question, to encourage clicks. \n\n- Align with Content: Ensure the description accurately reflects the blog post to meet user expectations and reduce bounce rates. \n\nYour output must only be the meta description and nothing else. \n"}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[3760,400],"id":"c7147af2-cda8-4618-b05d-d6ea918f310a","name":"Meta description","credentials":{"openAiApi":{"id":"U1pskvzZ86W4ILY6","name":"OpenAi account 2"}}},{"parameters":{"modelId":{"__rl":true,"value":"deepseek/deepseek-r1","mode":"list","cachedResultName":"DEEPSEEK/DEEPSEEK-R1"},"messages":{"values":[{"content":"=DO NOT OUTPUT ANYTHING OTHER THAN THE CODE. I want you to follow the layout of the template as a guide to generate the WordPress code for a blog post. Here are the rules to follow:\n\nThe blog post should have a title, estimated reading time, key takeaways, table of contents, body, and FAQ in this order.\nMake it engaging by using italics, dot points, quotes, bold, spaces, and sometimes new lines. Never use emojis.\nThe blog post will have some URLs referenced next to certain keyphrases to show where the info came from. You must hyperlink the keyphrase with the provided URL so that the reader can click on the referenced URL. It is critical you get this right.\nWrap the entire content in a container <div> with inline CSS that sets the text color to white (#ffffff), uses a legible font such as Arial, sans-serif, and sets line-height to 1.6.\nEnsure that all non-heading text elements (e.g., paragraphs, list items) have an inline style or embedded style that sets their font size to 20px and color to white (#ffffff) using !important to override theme styles.\nHyperlinks, points in the table of contents, and FAQ questions must be styled in blue (#00c2ff).\nAll headings and subheadings should have an underline implemented via a bottom border in blue (#00c2ff) with appropriate padding.\nPlace a double break (<br><br>) between each section to improve readability.\nDo not output any extra text or mention code tags like HTML''' around the output; just output the HTML code.\nBlog post: \n\n{{ $json.message.content }}\n\nHere's an example of a well formatted output:\n\n<div style=\"color: #ffffff; font-family: Arial, sans-serif; line-height: 1.6;\"> <style> p, .wp-block-paragraph, ul.wp-block-list, li { color: #ffffff !important; font-size: 20px !important; } a { color: #00c2ff !important; } </style> <h1 id=\"h-devin-ai-the-hype-and-reality-of-an-ai-software-engineer\" class=\"wp-block-heading\" style=\"border-bottom: 2px solid #00c2ff; padding-bottom: 5px;\">Devin AI: The Hype and Reality of an AI Software Engineer</h1> <br><br> <p class=\"estimated-reading-time\" style=\"color: #ffffff; font-size: 20px !important;\">Estimated reading time: 5 minutes</p> <br><br> <h2 id=\"h-key-takeaways\" class=\"wp-block-heading\" style=\"border-bottom: 2px solid #00c2ff; padding-bottom: 5px;\"><strong>Key Takeaways</strong></h2> <br><br> <ul class=\"wp-block-list\"> <li><mark style=\"background-color: #ffd966;\"><strong>Devin AI</strong></mark> claims to be the world's first fully autonomous AI software engineer.</li> <br><br> <li>Initial demos and claims have generated significant <mark style=\"background-color: #ffff00;\">hype</mark> and interest.</li> <br><br> <li>Critics argue some capabilities may be exaggerated or misleading.</li> <br><br> <li>Real-world testing reveals both <em>strengths</em> and <em>limitations</em>.</li> <br><br> <li>The true impact on software engineering remains to be seen.</li> </ul> <br><br> <div class=\"wp-block-yoast-seo-table-of-contents yoast-table-of-contents\"> <h2 style=\"color: #ffffff; border-bottom: 2px solid #00c2ff; padding-bottom: 5px;\">Table of contents</h2> <br><br> <ul> <li><a href=\"#h-devin-ai-the-hype-and-reality-of-an-ai-software-engineer\" data-level=\"1\">Devin AI: The Hype and Reality of an AI Software Engineer</a></li> <br><br> <li><a href=\"#h-key-takeaways\" data-level=\"2\">Key Takeaways</a></li> <br><br> <li><a href=\"#h-what-is-devin-ai\" data-level=\"2\">What is Devin AI?</a></li> <br><br> <li><a href=\"#h-the-hype-around-devin-ai\" data-level=\"2\">The Hype Around Devin AI</a></li> <br><br> <li><a href=\"#h-putting-devin-to-the-test\" data-level=\"2\">Putting Devin to the Test</a></li> <br><br> <li><a href=\"#h-the-reality-check\" data-level=\"2\">The Reality Check</a></li> <br><br> <li><a href=\"#h-the-future-of-ai-in-software-development\" data-level=\"2\">The Future of AI in Software Development</a></li> <br><br> <li><a href=\"#h-frequently-asked-questions\" data-level=\"2\">Frequently Asked Questions</a></li> </ul> </div> <br><br> <p>Devin AI has burst onto the tech scene, promising to revolutionize software development as we know it. But does this AI-powered coding assistant live up to the hype? Let's dive into what Devin AI really is, what it can do, and what developers are saying after putting it to the test.</p> <br><br> <!-- Rest of blog post content goes here --> </div>\n"}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[2860,400],"id":"3b67cd87-6eab-4602-b4cb-3ac85412a146","name":"HTML version","credentials":{"openAiApi":{"id":"U1pskvzZ86W4ILY6","name":"OpenAi account 2"}}},{"parameters":{"url":"https://serpapi.com/search?engine=google_images","authentication":"genericCredentialType","genericAuthType":"httpQueryAuth","sendQuery":true,"queryParameters":{"parameters":[{"name":"q","value":"={{ $('Choosing Topic').item.json.message.content }}"},{"name":"gl","value":"us"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[4100,400],"id":"4a83ef7c-8f3b-45d8-871e-9f4f1d6a26f0","name":"Image Covers","credentials":{"httpQueryAuth":{"id":"xe0TgEmbyKgVhb8b","name":"Query Auth account 2"}}},{"parameters":{"assignments":{"assignments":[{"id":"1f0541df-05ab-4e3d-a5d8-3904579fc8a9","name":"image-url","value":"={{ $json.images_results[1].original }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[4240,400],"id":"d2940f36-86b6-4434-a068-68b640370f0f","name":"Edit Fields"},{"parameters":{"title":"={{ $('Title').item.json.message.content }}","additionalFields":{"authorId":1,"content":"=<img src=\"{{ $json['image-url'] }}\" alt=\"Cover Image\">\n{{ $('HTML version').item.json.message.content }}}","slug":"={{ $('Slug').item.json.message.content }}","status":"draft","commentStatus":"closed","sticky":false,"categories":[280],"tags":[281],"postTemplate":{"values":{}}}},"type":"n8n-nodes-base.wordpress","typeVersion":1,"position":[4460,400],"id":"183e3f11-b61d-47db-9ccc-b91ed373c9cd","name":"Wordpress","credentials":{"wordpressApi":{"id":"SdXAZkZVFuk8jRCL","name":"Wordpress account"}}},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1dJOK6XNq2cATsMnfUFo5vksu6ck-0zOoZHAD5Ua4B8s","mode":"list","cachedResultName":"previous_posts","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1dJOK6XNq2cATsMnfUFo5vksu6ck-0zOoZHAD5Ua4B8s/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1dJOK6XNq2cATsMnfUFo5vksu6ck-0zOoZHAD5Ua4B8s/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"Blog Title":"={{ $json.title.rendered }}","Keywords":"={{ $('Aggregate').item.json['previous-posts'][0].Keywords }}","Summary":"={{ $('Aggregate').item.json['previous-posts'][0].Summary }}","URL":"={{ $json.guid.rendered }}"},"matchingColumns":[],"schema":[{"id":"Blog Title","displayName":"Blog Title","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Keywords","displayName":"Keywords","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Summary","displayName":"Summary","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"URL","displayName":"URL","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[4740,400],"id":"6b151999-24d2-41a8-92b5-87bf51ecf05f","name":"Google Sheets","credentials":{"googleSheetsOAuth2Api":{"id":"rKKreig72dpF3tcg","name":"Google Sheets account"}}},{"parameters":{"url":"https://serpapi.com/search?engine=google_trends","authentication":"genericCredentialType","genericAuthType":"httpQueryAuth","sendQuery":true,"queryParameters":{"parameters":[{"name":"q","value":"=  Generative ai"},{"name":"geo","value":"US"},{"name":"hl","value":"en"},{"name":"date","value":"={{ $now.minus({ days: 3 }).format('yyyy-MM-dd') }} {{ $now.format('yyyy-MM-dd') }}"},{"name":"data_type","value":"RELATED_QUERIES"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[160,400],"id":"f420e014-8474-46af-84e0-b5ee6bd805b4","name":"Trends","credentials":{"httpQueryAuth":{"id":"xe0TgEmbyKgVhb8b","name":"Query Auth account 2"}}},{"parameters":{"mode":"raw","jsonOutput":"={\n  \"most-trending\": {\n\n    \"#1\": { \n\n      \"query\":\"{{ $json.related_queries.rising[0].query }}\",\n      \"score\":\"{{ $json.related_queries.rising[0].extracted_value }}\"\n\n    },\n\n\n    \"#2\": { \n\n      \"query\":\"{{ $json.related_queries.rising[1].query }}\",\n      \"score\":\"{{ $json.related_queries.rising[1].extracted_value }}\"\n\n    }\n  }\n}","options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[340,400],"id":"c5531b02-dd8e-499f-a332-1dc93fe124ef","name":"2 Most Trending"},{"parameters":{"jsCode":"// Get the top array from your JSON\nconst topItems = $('Trends').first().json.related_queries.top;\n\n// Filter the items to only include those with extracted_value > 30\nconst filtered = topItems.filter(item => item.extracted_value > 30);\n\n// Map the filtered items to their query values and join them with commas\nconst resultString = filtered.map(item => item.query).join(', ');\n\n// Return the result in a new JSON property\nreturn [{ json: { result: resultString } }];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[560,400],"id":"66a50f30-a7aa-4f7a-8ef7-60aef0fe31c6","name":"High search volume keywords"},{"parameters":{"modelId":{"__rl":true,"value":"deepseek/deepseek-r1","mode":"id"},"messages":{"values":[{"content":"=You are part of a team that creates world class blog posts. Your job is to choose the topic for each blog post. \n\nThe blog posts are posted on the website of Sudhanshu Deo who is an experienced finance professional with excellent understanding on how to automate processes in Banking and finance industry. The blog posts are mainly posted as part of an SEO campaign to get Sudhanshu's website to  to rank high for increased visibility to his potential clients.\n\nIn this instance, you are given a list of 2 keywords which have been trending the most on Google news search over the past few days. \n\nYour job is to pick one which you think would make for the most relevant blog post with the best SEO outcomes for the client. \n\nThe keywords have two attributes: \n\n1. query: This attribute determines the search query that users have been searching for which is trending. \n\n2. value: This attribute determines what percentage increase the keyword has seen compared to previous periods (i.e. the increase in search volume). \n\nYou must choose one out of the taking into consideration of the score. \n\nOutput the keyword you decided to post a blog on and nothing else. Don't explain your reasoning. Just output the keyword. \n\nThis instance: \n\nKeyword 1:\n{{ $('2 Most Trending').item.json['most-trending']['#1'].toJsonString() }} \n\nKeyword2: \n{{ $('2 Most Trending').item.json['most-trending']['#2'].toJsonString() }} "}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[780,400],"id":"434da924-e011-4f7c-8388-effee18d492c","name":"Choosing Topic","credentials":{"openAiApi":{"id":"U1pskvzZ86W4ILY6","name":"OpenAi account 2"}}},{"parameters":{"modelId":{"__rl":true,"value":"anthropic/claude-3.5-sonnet","mode":"id"},"messages":{"values":[{"content":"=You are part of a team that creates world class blog posts for SEO purposes. \n\nEvery week your team posts one blog post on the most trending news in this week of AI. As the copywriter for the blogs, you are provided with the folling information: \n\n- Query: The topic of this weeks blog post. This is the most trending news in the space.\n\n- Other keywords: This is a list of some high search volume keywords in the AI space. The goal is to include some of these into the blog post naturally. This is only optional and dependant on the natural dependancy of this weeks topic to the blog post. Include any of the keywords in the blog, if you can do so naturally without changing the meaning of the blog post.  \n\n\n- Research findings: This is research found from very reputable resources in relation to the topic of the post. Your blog post must be based off this research.\n\n\nGiven the said info, you must write the blog post.\n \nThe blog post must: \n\n- Place the query in the blog title, H1 header and early in the introduction. \n\n- Include all detail in research findings. When including the research points, make sure to also include their source URL so that the copywriter can use them as hyperlinks. (source url for each statement is given in the research findings next to the text)\n\n- Be very detailed. \n\n- Be using tone similar to that of a reporter, invoking curiosity and excitement and thrill in the readers.\n\n- Flow naturally and make sense. \n\n- Be at minimum 1500 to 2000 words long. \n\n- Be suitable for a year 5 reading level. \n\nMake sure to create the entire blog post draft in your first output. Don't stop or cut it short. \n\nYour output must be the blog post and nothing else.\n\nHere are the details of your next blog post project: \n\nQuery: \n{{ $('Choosing Topic').item.json.message.content }}\n\nDetailed Research: \n{{ $json.research }}\n\nWrite the blog post.\n"}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[1620,400],"id":"c6157d8a-672b-4337-937c-6773017bf328","name":"Copywriter","credentials":{"openAiApi":{"id":"U1pskvzZ86W4ILY6","name":"OpenAi account 2"}}},{"parameters":{"content":"## Find Trend\n\n","height":240,"width":400},"type":"n8n-nodes-base.stickyNote","position":[80,320],"typeVersion":1,"id":"2e2717e1-d5bb-4fa8-8b35-152a39312833","name":"Sticky Note"},{"parameters":{"content":"## High Volume Keywords\n\n","height":240,"width":200},"type":"n8n-nodes-base.stickyNote","position":[520,320],"typeVersion":1,"id":"170ed1fe-b542-4921-96f1-68bba922e234","name":"Sticky Note1"},{"parameters":{"content":"## Choosing Blog Topic\n\n\n","height":240,"width":340},"type":"n8n-nodes-base.stickyNote","position":[760,320],"typeVersion":1,"id":"561e23a3-43ab-41d5-9f9b-dd0f303e9400","name":"Sticky Note2"},{"parameters":{"content":"## Research\n\n\n","height":240,"width":460},"type":"n8n-nodes-base.stickyNote","position":[1120,320],"typeVersion":1,"id":"9856b729-bd64-4a6d-8f92-664a418c41d7","name":"Sticky Note3"},{"parameters":{"content":"## Write Post\n\n\n","height":240,"width":360},"type":"n8n-nodes-base.stickyNote","position":[1600,320],"typeVersion":1,"id":"aaf9ae02-fb75-47b2-9ea8-2c72631423e3","name":"Sticky Note4"},{"parameters":{"content":"## Internal Links\n\n\n","height":240,"width":800},"type":"n8n-nodes-base.stickyNote","position":[2000,320],"typeVersion":1,"id":"88aee41f-b6f0-4852-96d5-d1b03994c258","name":"Sticky Note5"},{"parameters":{"content":"## Prepare to Post\n\n\n","height":240,"width":1220},"type":"n8n-nodes-base.stickyNote","position":[2820,320],"typeVersion":1,"id":"4e36c240-4c8a-4b89-a48d-df674d4d6870","name":"Sticky Note6"},{"parameters":{"content":"## Find Cover Image\n\n\n","height":240,"width":320},"type":"n8n-nodes-base.stickyNote","position":[4060,320],"typeVersion":1,"id":"629c433d-f6ea-4af5-8594-2e5894ebdc63","name":"Sticky Note7"},{"parameters":{"content":"## Post on Wordpress\n\n\n","height":240},"type":"n8n-nodes-base.stickyNote","position":[4420,320],"typeVersion":1,"id":"e0c311a6-4156-4747-9a99-2f5c828dc30c","name":"Sticky Note8"},{"parameters":{"content":"## Add to Other Blogs\n\n\n","height":240},"type":"n8n-nodes-base.stickyNote","position":[4680,320],"typeVersion":1,"id":"876bc55e-eb35-4df1-b8a5-2556fe5099fc","name":"Sticky Note9"},{"parameters":{"content":"# Trend SEO Post","height":80,"width":420,"color":4},"type":"n8n-nodes-base.stickyNote","position":[0,0],"typeVersion":1,"id":"fd7e59e6-357d-4c29-9449-bf403c0c41ae","name":"Sticky Note10"}],"connections":{"Schedule Trigger":{"main":[[{"node":"Trends","type":"main","index":0}]]},"Research":{"main":[[{"node":"Fix Links","type":"main","index":0}]]},"Fix Links":{"main":[[{"node":"Copywriter","type":"main","index":0}]]},"Previous Posts":{"main":[[{"node":"Aggregate","type":"main","index":0}]]},"Aggregate":{"main":[[{"node":"Add internal links","type":"main","index":0}]]},"Add internal links":{"main":[[{"node":"HTML version","type":"main","index":0}]]},"Slug":{"main":[[{"node":"Title","type":"main","index":0}]]},"Title":{"main":[[{"node":"Meta description","type":"main","index":0}]]},"HTML version":{"main":[[{"node":"Slug","type":"main","index":0}]]},"Meta description":{"main":[[{"node":"Image Covers","type":"main","index":0}]]},"Image Covers":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"Wordpress","type":"main","index":0}]]},"Wordpress":{"main":[[{"node":"Google Sheets","type":"main","index":0}]]},"Trends":{"main":[[{"node":"2 Most Trending","type":"main","index":0}]]},"2 Most Trending":{"main":[[{"node":"High search volume keywords","type":"main","index":0}]]},"High search volume keywords":{"main":[[{"node":"Choosing Topic","type":"main","index":0}]]},"Choosing Topic":{"main":[[{"node":"Research","type":"main","index":0}]]},"Copywriter":{"main":[[{"node":"Previous Posts","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","saveExecutionProgress":true,"callerPolicy":"workflowsFromSameOwner"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"a1f6cd2a-5c1c-4a7f-84bb-262659447306","triggerCount":0,"tags":[]},{"createdAt":"2025-03-29T22:06:30.542Z","updatedAt":"2025-05-03T20:52:24.000Z","id":"NdZNYMgLCnoZj2FU","name":"Email Responder","active":true,"isArchived":false,"nodes":[{"parameters":{"pollTimes":{"item":[{"mode":"everyMinute"}]},"simple":false,"filters":{"q":"-from:me"},"options":{}},"id":"b5aa8d95-afdf-48ab-9771-a56f6e9fa7a2","name":"Gmail Trigger","type":"n8n-nodes-base.gmailTrigger","position":[-600,-40],"typeVersion":1,"credentials":{"gmailOAuth2":{"id":"9AGHFf4HGRckDBlW","name":"Gmail account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"53849246-ad32-4845-9976-9f9688f5a6f2","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.needsReply }}","rightValue":"true"}],"combinator":"and"},"options":{}},"id":"2900fd8f-5feb-4d88-a4ac-5a4cba27d1a2","name":"If Needs Reply","type":"n8n-nodes-base.if","position":[0,0],"typeVersion":2},{"parameters":{"jsonSchema":"{\n  \"type\": \"object\",\n  \"properties\": {\n    \"needsReply\": {\n      \"type\": \"boolean\"\n      }\n  },\n  \"required\": [\"needsReply\"]\n}\n"},"id":"761f7751-faa2-41c6-a871-8b76d5d5bda6","name":"JSON Parser","type":"@n8n/n8n-nodes-langchain.outputParserStructured","position":[-232,180],"typeVersion":1},{"parameters":{"content":"## When I receive an Email\n","height":394.42512272977456,"width":304.10628068244364},"id":"8cffc80f-6af3-4a6c-b0ee-aecc74cda86e","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","position":[-702,-274],"typeVersion":1},{"parameters":{"content":"## ... that Needs a Reply\n","height":397,"width":556},"id":"f8e4a4f6-9b44-4e88-ab5e-87a510c91448","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","position":[-420,-277],"typeVersion":1},{"parameters":{"content":"## Generate a Reply","height":400.08454375343996,"width":333.19082443588354},"id":"273d0015-2ff2-4a8d-8749-3e7b7c6013e1","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","position":[177.5,-80],"typeVersion":1},{"parameters":{"content":"## ...as a Draft in the conversation","height":395,"width":326},"id":"fbf86d8a-a6d5-455f-b8ef-7b010a2fd04f","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","position":[479,-275],"typeVersion":1},{"parameters":{"sendTo":"={{ $('Gmail Trigger').item.json.from.value[0].address }}","subject":"=Re: {{ $('Gmail Trigger').item.json.headers.subject }}","message":"={{ $json.text.replace(/\\n/g, \"<br />\\n\") }}","options":{"appendAttribution":false}},"id":"8ae160c6-35cd-4fe6-a9f8-e42fbee33a87","name":"Gmail - Create Draft","type":"n8n-nodes-base.gmail","position":[600,-40],"typeVersion":2.1,"webhookId":"a753290d-874c-4c15-a56c-945048f6c0c7","credentials":{"gmailOAuth2":{"id":"9AGHFf4HGRckDBlW","name":"Gmail account"}}},{"parameters":{"prompt":"=Subject: {{ $json.subject }}\nMessage:\n{{ $json.textAsHtml }} ","messages":{"messageValues":[{"message":"Your task is to assess if the message requires a response. Return in JSON format true if it does, false otherwise.\nMarketing emails don't require a response."}]}},"id":"52ab3c96-b34b-4408-b7d4-e94ac177debc","name":"Assess if message needs a reply","type":"@n8n/n8n-nodes-langchain.chainLlm","position":[-380,-40],"typeVersion":1.3},{"parameters":{"promptType":"define","text":"=Subject: {{ $('Gmail Trigger').item.json.subject }}\nMessage: {{ $('Gmail Trigger').item.json.textAsHtml }}","messages":{"messageValues":[{"message":"You're a helpful personal assistant and your task is to draft replies on my behalf to my incoming emails. Whenever I provide some text from an email, return an appropriate draft reply for it and nothing else.\nEnsure that the reply is suitable for a professional email setting and addresses the topic in a clear, structured, and detailed manner.\nDo not make things up.\n\nDetailed instructions:\n- Be concise and maintain a business casual tone.\n- Start with \"Hello,\", and end with \"Best,\"\n- When replying to yes-no questions, draft 2 responses: one affirmative and one negative separated by \" - - - - - - - OR - - - - - - - \"\n- If you don't know an answer, you can leave placeholders like \"[YOUR_ANSWER_HERE]\".\n- Don't use any special formatting, only plain text.\n- At the end of email, mention that this mail is generated by AI Agent without approval by Sudhanshu.\n"}]}},"id":"6340bf78-1aa6-46b1-8ef9-332d3c945598","name":"Generate email reply","type":"@n8n/n8n-nodes-langchain.chainLlm","position":[220,-40],"typeVersion":1.4},{"parameters":{"modelName":"models/gemini-2.0-flash-lite-preview","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-420,200],"id":"cb3064e9-1895-4735-90e6-48b452ba17e3","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"DT6tCE7eOCxH9sdQ","name":"Google Gemini(PaLM) Api account"}}},{"parameters":{"modelName":"models/gemini-2.5-pro-exp-03-25","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[304,180],"id":"af370e75-f92b-44e5-8a53-665586ac31e6","name":"Google Gemini Chat Model1","credentials":{"googlePalmApi":{"id":"DT6tCE7eOCxH9sdQ","name":"Google Gemini(PaLM) Api account"}}}],"connections":{"JSON Parser":{"ai_outputParser":[[{"node":"Assess if message needs a reply","type":"ai_outputParser","index":0}]]},"Gmail Trigger":{"main":[[{"node":"Assess if message needs a reply","type":"main","index":0}]]},"If Needs Reply":{"main":[[{"node":"Generate email reply","type":"main","index":0}]]},"Generate email reply":{"main":[[{"node":"Gmail - Create Draft","type":"main","index":0}]]},"Assess if message needs a reply":{"main":[[{"node":"If Needs Reply","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"Assess if message needs a reply","type":"ai_languageModel","index":0}]]},"Google Gemini Chat Model1":{"ai_languageModel":[[{"node":"Generate email reply","type":"ai_languageModel","index":0}]]}},"settings":{"executionOrder":"v1","timezone":"Europe/London","callerPolicy":"workflowsFromSameOwner"},"staticData":{"node:Gmail Trigger":{"lastTimeChecked":1752178654,"possibleDuplicates":["196b46caeaa389f1","196b44f1e52cd914"]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"f156ae3e-501e-4406-a481-df13cba4e4fe","triggerCount":1,"tags":[]},{"createdAt":"2025-03-31T10:35:32.395Z","updatedAt":"2025-05-03T14:52:24.000Z","id":"qVBNh7AJZPLiEwq1","name":"Email_response","active":true,"isArchived":false,"nodes":[{"parameters":{"sendTo":"sd4homeadd@gmail.com","subject":"= {{ $('gemini').item.json.model }}Response","message":"=<!DOCTYPE html>\n<html>\n<head>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            line-height: 1.6;\n            color: #333;\n        }\n        .container {\n            width: 90%;\n            margin: auto;\n            padding: 20px;\n            border: 1px solid #ddd;\n            border-radius: 10px;\n            background-color: #f9f9f9;\n        }\n        .header {\n            text-align: center;\n            padding-bottom: 20px;\n        }\n        .header h1 {\n            color: #007BFF;\n        }\n        .section {\n            margin-bottom: 20px;\n        }\n        .section h2 {\n            color: #007BFF;\n            border-bottom: 2px solid #ddd;\n            padding-bottom: 5px;\n        }\n        .section p {\n            margin: 10px 0;\n        }\n        .code-snippet {\n            background-color: #f0f0f0;\n            padding: 10px;\n            border-radius: 5px;\n            font-family: monospace;\n            white-space: pre-wrap; /* Ensures line breaks are preserved */\n        }\n        .footer {\n            text-align: center;\n            font-size: 0.9em;\n            color: #777;\n            margin-top: 20px;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Workflow Results</h1>\n        </div>\n\n        <div class=\"section\">\n            <h2>Time Taken</h2>\n            <p>{{ $('Gemini_edit').item.json.time_taken }}</p>\n        </div>\n\n        <div class=\"section\">\n            <h2>Response</h2>\n            {{ $json.response }}\n        </div>\n\n        <div class=\"section\">\n            <h2>Reasoning</h2>\n            {{ $json.reasoning }}\n        </div>\n\n        <div class=\"footer\">\n            Current date: Monday, March 31, 2025, 3:00 PM BST\n        </div>\n    </div>\n</body>\n</html>\n","options":{"appendAttribution":false}},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[260,-220],"id":"f55e30d0-6e41-4812-802b-ce28a48aec22","name":"Gmail","webhookId":"801dddf8-9743-4d49-be1b-843299daad67","credentials":{"gmailOAuth2":{"id":"9AGHFf4HGRckDBlW","name":"Gmail account"}}},{"parameters":{"jsCode":"// Input: The response text from your API\nconst apiResponse = $json[\"response\"];\n\n// Define a function to segregate reasoning and response\nfunction segregateReasoningAndResponse(text) {\n  try {\n    // Use regular expressions to extract the Reasoning and Response sections\n    const reasoningMatch = text.match(/(?<=\\*\\*\\*Reasoning\\*\\*\\*)([\\s\\S]*?)(?=\\*\\*\\*Answer\\*\\*\\*)/);\n    const responseMatch = text.match(/(?<=\\*\\*\\*Answer\\*\\*\\*)([\\s\\S]*)/);\n\n    // Extract reasoning and response or set defaults if not found\n    const reasoning = reasoningMatch ? reasoningMatch[0].trim() : \"Reasoning not found.\";\n    const response = responseMatch ? responseMatch[0].trim() : \"Response not found.\";\n\n    // Format the output for better readability (e.g., add HTML tags for email formatting)\n    const formattedReasoning = `<h2>Reasoning</h2><p>${reasoning.replace(/\\n/g, '<br>')}</p>`;\n    const formattedResponse = `<h2>Response</h2><pre><code>${response.replace(/\\n/g, '<br>')}</code></pre>`;\n\n    return { reasoning: formattedReasoning, response: formattedResponse };\n  } catch (error) {\n    // Handle any unexpected errors gracefully\n    return {\n      error: `An error occurred while processing the text: ${error.message}`,\n      rawText: text,\n    };\n  }\n}\n\n// Call the function with the API response\nconst result = segregateReasoningAndResponse(apiResponse);\n\n// Return the segregated Reasoning and Response\nreturn {\n  reasoning: result.reasoning,\n  response: result.response,\n  error: result.error || null, // Include error information if any\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[80,-220],"id":"180cb705-d37e-41cb-8d50-afc35e763a79","name":"Code"},{"parameters":{"pollTimes":{"item":[{"mode":"everyMinute"}]},"filters":{"sender":"sd4homeadd@gmail.com"}},"type":"n8n-nodes-base.gmailTrigger","typeVersion":1.2,"position":[-740,-140],"id":"ddd5551e-b2fa-47ec-8df6-3acd5d9581c2","name":"Gmail Trigger","credentials":{"gmailOAuth2":{"id":"9AGHFf4HGRckDBlW","name":"Gmail account"}}},{"parameters":{"method":"POST","url":"http://bitnet:8000/generate","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n\"prompt\": \"You are a helpful assistant. Please read the user message and provide answer. Your answer should include only text with no special characters. The answer should be broken down in 2 sections -  ***Reasoning*** -  to show step by step how you reasoned and ***Answer*** - your final answer to the user. message:{{ $('Gmail Trigger').item.json.snippet }} \" ,\n\"reasoning\" : true,\n  \"stream\": false\n} ","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-400,0],"id":"6065e715-a2f9-4afe-a211-f99b29d6e4a0","name":"bitnet"},{"parameters":{"method":"POST","url":"http://192.168.1.247:7000/generate","sendQuery":true,"queryParameters":{"parameters":[{}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n\"prompt\": \"You are a hepful assistant. Please read the user message and provide answer. Your answer should include only text with no specialt characters. The answer should be broken down in 2 sections -  ***Reasoning*** -  to show step by step how you reasoned and ***Answer*** - your final answer to the user. message: {{ $json.snippet }}\" ,\n\"reasoning\" : true,\n  \"stream\": false\n} ","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-400,-220],"id":"ecf1f625-1536-48a3-bc85-2f01598d0e14","name":"gemini"},{"parameters":{"language":"python","pythonCode":"# Loop over input items and add a new field called 'myNewField' to the JSON of each one\nfor item in _input.all():\n  item.json.myNewField = 1\nreturn _input.all()"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[80,0],"id":"960f2391-95d5-4964-9d51-71eb96d022d3","name":"Code1"},{"parameters":{"assignments":{"assignments":[{"id":"a8007344-8eb9-4037-80ea-39c8e2bd0b70","name":"response","value":"={{ $json.response }}","type":"string"},{"id":"8e4dcaac-2f78-4146-ab90-7380567c5487","name":"time_taken","value":"={{ $json.time_taken }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-180,-220],"id":"9a92aff6-6eac-4ce8-b3aa-aef6ee58404d","name":"Gemini_edit"},{"parameters":{"assignments":{"assignments":[{"id":"a8007344-8eb9-4037-80ea-39c8e2bd0b70","name":"response","value":"={{ $json.response }}","type":"string"},{"id":"8e4dcaac-2f78-4146-ab90-7380567c5487","name":"time_taken","value":"={{ $json.time_taken_seconds }}","type":"string"},{"id":"f20d2c41-b531-4737-9241-59ab4516e897","name":"reasoning","value":"={{ $json.reasoning }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-160,0],"id":"24d24c22-4670-4c94-9f0c-2be0b6032e0e","name":"Bitnet_edit"},{"parameters":{"sendTo":"sd4homeadd@gmail.com","subject":"={{ $('bitnet').item.json.model }} Response","message":"=<!DOCTYPE html>\n<html>\n<head>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            line-height: 1.6;\n            color: #333;\n        }\n        .container {\n            width: 90%;\n            margin: auto;\n            padding: 20px;\n            border: 1px solid #ddd;\n            border-radius: 10px;\n            background-color: #f9f9f9;\n        }\n        .header {\n            text-align: center;\n            padding-bottom: 20px;\n        }\n        .header h1 {\n            color: #007BFF;\n        }\n        .section {\n            margin-bottom: 20px;\n        }\n        .section h2 {\n            color: #007BFF;\n            border-bottom: 2px solid #ddd;\n            padding-bottom: 5px;\n        }\n        .section p {\n            margin: 10px 0;\n        }\n        .code-snippet {\n            background-color: #f0f0f0;\n            padding: 10px;\n            border-radius: 5px;\n            font-family: monospace;\n            white-space: pre-wrap; /* Ensures line breaks are preserved */\n        }\n        .footer {\n            text-align: center;\n            font-size: 0.9em;\n            color: #777;\n            margin-top: 20px;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Workflow Results</h1>\n        </div>\n\n        <div class=\"section\">\n            <h2>Time Taken</h2>\n            <p>{{ $json.time_taken }}</p>\n        </div>\n\n        <div class=\"section\">\n            <h2>Response</h2>\n            {{ $json.response }}\n        </div>\n\n       \n        <div class=\"footer\">\n            Current date: Monday, March 31, 2025, 3:00 PM BST\n        </div>\n    </div>\n</body>\n</html>\n","options":{"appendAttribution":false}},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[280,0],"id":"58098287-7faa-47fc-a96d-9b7cfe48820b","name":"Gmail1","webhookId":"801dddf8-9743-4d49-be1b-843299daad67","credentials":{"gmailOAuth2":{"id":"9AGHFf4HGRckDBlW","name":"Gmail account"}}}],"connections":{"Gmail":{"main":[[]]},"Code":{"main":[[{"node":"Gmail","type":"main","index":0}]]},"Gmail Trigger":{"main":[[{"node":"bitnet","type":"main","index":0}]]},"gemini":{"main":[[{"node":"Gemini_edit","type":"main","index":0}]]},"bitnet":{"main":[[{"node":"Bitnet_edit","type":"main","index":0}]]},"Code1":{"main":[[{"node":"Gmail1","type":"main","index":0}]]},"Gemini_edit":{"main":[[{"node":"Code","type":"main","index":0}]]},"Bitnet_edit":{"main":[[{"node":"Code1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Gmail Trigger":{"Gmail Trigger":{"lastTimeChecked":1752178654,"possibleDuplicates":["19697ed235bffdd3","19696a068a2ecee5"]}}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"bb05e2db-ead8-437b-a17a-af5057d86c82","triggerCount":1,"tags":[]},{"createdAt":"2025-03-31T17:26:19.053Z","updatedAt":"2025-04-15T17:02:56.000Z","id":"1fGt5IqQJM8Lq0NB","name":"Telegram_trigger","active":false,"isArchived":false,"nodes":[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.1,"position":[0,0],"id":"892ba790-2097-497a-99b8-42aed4e5180e","name":"Telegram Trigger","webhookId":"df86866c-3a5a-4d2b-b556-0fc99d195bef","credentials":{"telegramApi":{"id":"OfBBU5xslylnUez7","name":"Telegram account"}}}],"connections":{},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"38af2025-a362-4de6-bb30-5b3474e32b01","triggerCount":0,"tags":[]},{"createdAt":"2025-04-05T20:52:01.062Z","updatedAt":"2025-04-21T10:58:00.000Z","id":"vmtu4YlPQz0lULw0","name":"Manage_file_list","active":true,"isArchived":false,"nodes":[{"parameters":{"resource":"fileFolder","searchMethod":"query","queryString":"mimeType=\"application/pdf\" and \"15MLQQOMA8Yb7OgQT9XA2vdONBlhRMQy0\" in parents and trashed=false","returnAll":true,"filter":{},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[220,0],"id":"026c855a-1271-4a5c-915e-4426770cb106","name":"Google Drive","alwaysOutputData":false,"credentials":{"googleDriveOAuth2Api":{"id":"HWDIqi758lupmbcu","name":"Google Drive account"}}},{"parameters":{"path":"data/","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[0,0],"id":"ecda9dcb-4bff-4cff-93bc-087449262e16","name":"Webhook","webhookId":"04056c25-a4a9-406c-865b-f6b9ba12f3f6"},{"parameters":{"assignments":{"assignments":[{"id":"3ac421d3-1d4f-4360-b091-4eeaea7e61e3","name":"id","value":"={{ $json.id }}","type":"string"},{"id":"adb0d730-67d6-47d2-bc5d-41bb041ee85b","name":"name","value":"={{ $json.name }}","type":"string"}]},"includeOtherFields":true,"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[440,0],"id":"ba017bcf-4563-4bcd-8a11-771f7986f7e1","name":"Edit Fields"},{"parameters":{"respondWith":"allIncomingItems","options":{"responseCode":200,"responseHeaders":{"entries":[{"name":"Access-Control-Allow-Origin","value":"https://editingdestiny.duckdns.org"}]}}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[660,0],"id":"449c7b5a-047f-4d68-b954-4013a145b1d2","name":"Respond to Webhook"}],"connections":{"Webhook":{"main":[[{"node":"Google Drive","type":"main","index":0}]]},"Google Drive":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"c427bcda-c036-4154-aef9-29220e90d7b5","triggerCount":1,"tags":[]},{"createdAt":"2025-04-06T07:17:56.959Z","updatedAt":"2025-04-15T17:01:18.000Z","id":"HPjJFmEm7XgIr9yE","name":"Trigger_knowledge","active":true,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"generate_kg/","responseMode":"responseNode","options":{"allowedOrigins":"*"}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-400,-320],"id":"ab6f8902-03a6-42e8-b292-85928ceeebb5","name":"Webhook","webhookId":"04056c25-a4a9-406c-865b-f6b9ba12f3f6"},{"parameters":{"options":{"responseCode":200,"responseHeaders":{"entries":[{"name":"Access-Control-Allow-Origin","value":"https://editingdestiny.duckdns.org"},{"name":"Content-Type","value":"application/json"}]}}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[160,-320],"id":"3a60c328-ee37-4eb3-9d75-bd8fbba6f829","name":"Respond to Webhook"},{"parameters":{"method":"POST","url":"http://python-kg:5071/get_or_generate_kg","sendBody":true,"bodyParameters":{"parameters":[{"name":"selected_file_id","value":"={{ $node[\"Webhook\"].json.body.selected_file_id }}"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-120,-320],"id":"fc66157e-0219-44cb-8b4d-4a29b2325dc6","name":"HTTP Request"}],"connections":{"Webhook":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"HTTP Request":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"fe98b7f8-c0d7-47cc-8b67-f3b67a160959","triggerCount":1,"tags":[]},{"createdAt":"2025-04-06T20:48:48.443Z","updatedAt":"2025-04-24T13:18:29.000Z","id":"ZQ2HbcrmrijJmTLH","name":"Q&A","active":true,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"ask-question","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-180,0],"id":"a078c951-961a-42a1-a3b3-9989f346bc24","name":"Webhook","webhookId":"98eee564-98bf-4020-98d6-d282a3395631"},{"parameters":{"method":"POST","url":"http://python-kg:5071/ask_question","sendBody":true,"bodyParameters":{"parameters":[{"name":"selected_file_id","value":"={{ $node[\"Webhook\"].json.body.selected_file_id }}"},{"name":"question","value":"={{ $node[\"Webhook\"].json.body.question }}"},{"name":"document_name","value":"={{ $node[\"Webhook\"].json.body.document_name || '' }}"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[0,0],"id":"a930290f-5789-49fb-b260-48b8af79bc60","name":"HTTP Request"},{"parameters":{"respondWith":"json","responseBody":"{ \"status\": \"success\", \"message\": \"Answers logged.\" }","options":{"responseCode":200,"responseHeaders":{"entries":[{"name":"Content-Type","value":"application/json"},{"name":"Access-Control-Allow-Origin","value":"https://editingdestiny.duckdns.org"}]}}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[860,140],"id":"208a685e-dd64-45c5-9b1d-e40bcdc3ea59","name":"Respond to Webhook"},{"parameters":{"assignments":{"assignments":[{"id":"1227cc25-40cd-4c93-afff-ece3f6dfa25f","name":"body.document_name","value":"={{ $('Webhook').item.json.body.selected_file_id }}","type":"string"},{"id":"5f3d524b-59b5-4659-9bd4-60df11967bae","name":"body.question","value":"={{ $('Webhook').item.json.body.question }}","type":"string"},{"id":"00a0cf73-400f-4b1e-b540-5be7a0f41bd7","name":"answer_with_rag","value":"={{ $json.answer_with_rag }}","type":"string"},{"id":"908157db-a1a9-4975-8b45-040ef8d76606","name":"answer_without_rag","value":"={{ $json.answer_without_rag }}","type":"string"},{"id":"2d462207-b4c7-421b-89c0-89cf65ebaaac","name":"Timestamp","value":"={{ $now.toFormat(\"yyyy-MM-dd HH:mm:ss\") }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[340,20],"id":"e54afeda-dfac-4de3-ad7c-bdee4b6934a3","name":"Edit Fields"},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1IoXFdmf7icb41-bPhusBHUISv7m_FkagNSMUwVmQuCo","mode":"list","cachedResultName":"Document Q&A Log","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1IoXFdmf7icb41-bPhusBHUISv7m_FkagNSMUwVmQuCo/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1IoXFdmf7icb41-bPhusBHUISv7m_FkagNSMUwVmQuCo/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"Document ID":"={{ $('Webhook').item.json.body.selected_file_id }}","Document Name":"={{ $('Webhook').item.json.body.document_name }}","Question":"={{ $json.body.question }}","Answer":"={{ $json.answer_with_rag }}","Answer without RAG":"={{ $json.answer_without_rag }}","Timestamp":"={{ $json.Timestamp }}"},"matchingColumns":[],"schema":[{"id":"Timestamp","displayName":"Timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Document ID","displayName":"Document ID","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Document Name","displayName":"Document Name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Question","displayName":"Question","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Answer","displayName":"Answer","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Answer without RAG","displayName":"Answer without RAG","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[560,0],"id":"4afa4659-1c73-4bb9-bd1f-7ae8e72b5e6a","name":"Google Sheets","credentials":{"googleSheetsOAuth2Api":{"id":"rKKreig72dpF3tcg","name":"Google Sheets account"}}},{"parameters":{"jsCode":"const stripThinking = (text) => {\n  return text.replace(/<think>[\\s\\S]*?<\\/think>\\s*/g, '').trim();\n};\n\nreturn items.map(item => {\n  item.json.answer_with_rag = stripThinking(item.json.answer_with_rag);\n  item.json.answer_without_rag = stripThinking(item.json.answer_without_rag);\n  return item;\n});\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[160,20],"id":"05294a44-a4f8-4aec-a5a1-0e798af2de98","name":"Code"}],"connections":{"Webhook":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"HTTP Request":{"main":[[{"node":"Code","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"Google Sheets","type":"main","index":0}]]},"Google Sheets":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]},"Code":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"77bcce93-d32a-4c71-a694-372363fca03e","triggerCount":1,"tags":[]},{"createdAt":"2025-04-09T06:57:30.373Z","updatedAt":"2025-04-15T17:01:38.000Z","id":"96dFXwcTkAABwx1w","name":"Manage_pdf_upload","active":true,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"upload_pdf","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[0,0],"id":"87648824-5702-4f48-bafc-8b1589a45329","name":"Webhook","webhookId":"bbaa9749-d6c2-4274-bbb4-06d6c3036e93"},{"parameters":{"respondWith":"json","responseBody":"{ \"status\": \"success\", \"message\": \"Answers logged.\" }","options":{"responseCode":200,"responseHeaders":{"entries":[{"name":"Content-Type","value":"application/json"},{"name":"Access-Control-Allow-Origin","value":"https://editingdestiny.duckdns.org"}]}}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[1300,0],"id":"464b6b2b-7ee8-4d39-9774-279995eb81f5","name":"Respond to Webhook"},{"parameters":{"name":"={{ $binary.data.fileName }}","driveId":{"__rl":true,"value":"My Drive","mode":"list","cachedResultName":"My Drive","cachedResultUrl":"https://drive.google.com/drive/my-drive"},"folderId":{"__rl":true,"value":"15MLQQOMA8Yb7OgQT9XA2vdONBlhRMQy0","mode":"list","cachedResultName":"n8n","cachedResultUrl":"https://drive.google.com/drive/folders/15MLQQOMA8Yb7OgQT9XA2vdONBlhRMQy0"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[420,0],"id":"1bac59f2-cb2e-42cf-a625-ae631d10dc8c","name":"Google Drive","credentials":{"googleDriveOAuth2Api":{"id":"HWDIqi758lupmbcu","name":"Google Drive account"}}},{"parameters":{"jsCode":"return [\n  {\n    binary: {\n      data: {\n        data: Buffer.from($json.body.content_b64, 'base64'),\n        mimeType: 'application/pdf',\n        fileName: $json.body.filename,\n      },\n    },\n  },\n];\n  "},"type":"n8n-nodes-base.code","typeVersion":2,"position":[220,0],"id":"f6193cb2-5f82-469a-a952-c582b3d23827","name":"Code"}],"connections":{"Webhook":{"main":[[{"node":"Code","type":"main","index":0}]]},"Google Drive":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]},"Code":{"main":[[{"node":"Google Drive","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"bc80f989-c984-4178-bd52-200058e75716","triggerCount":1,"tags":[]},{"createdAt":"2025-04-19T10:03:40.373Z","updatedAt":"2025-05-03T12:15:01.000Z","id":"1HA6Rov2FClNL2VW","name":"bitnet","active":true,"isArchived":false,"nodes":[{"parameters":{"assignments":{"assignments":[{"id":"a8007344-8eb9-4037-80ea-39c8e2bd0b70","name":"response","value":"={{ $json.response }}","type":"string"},{"id":"8e4dcaac-2f78-4146-ab90-7380567c5487","name":"time_taken","value":"={{ $json.time_taken_seconds }}","type":"string"},{"id":"11740bb4-acd0-4ade-b1c6-0c172fad86d0","name":"reasoning","value":"={{ $json.reasoning }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-240,-140],"id":"042f544a-368b-4fae-bd04-7a4f97b26f5c","name":"Edit Fields"},{"parameters":{"mode":"runOnceForEachItem","jsCode":"const reasoning = $json.reasoning || \"No reasoning found.\";\nconst response = $json.response || \"No response found.\";\nconst time_taken = $json.time_taken || \"N/A\";\n\nreturn {\n  reasoning: `${reasoning.replace(/\\n/g, \"<br>\")}`,\n  response: `${response.replace(/\\n/g, \"<br>\")}`,\n  time_taken,\n  error: null\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[0,-140],"id":"67a845db-6944-44fa-8feb-e29649f7d1c9","name":"Code"},{"parameters":{"method":"POST","url":"http://bitnet:8000/generate","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"prompt\": \"{{ $json['body']['messages'] ? $json['body']['messages'].map(m => (m.role === 'user' ? 'USER: ' : 'ASSISTANT: ') + m.content).join(' ') : '' }}\",\n  \"max_tokens\": \"{{ $json['body']['max_tokens'] || 1500 }}\",\n  \"temperature\": \"{{ $json['body']['temperature'] || 0.3 }}\"\n}\n","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-440,-140],"id":"98ecee7c-766f-4150-8bfa-135a799201c1","name":"Phi-LLM"},{"parameters":{"httpMethod":"POST","path":"sllm","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-620,-140],"id":"b74d9c04-9c0a-4d4e-ae21-1436a76eaf22","name":"Webhook","webhookId":"b9d81f31-3cfb-4af1-9f09-09b4111b2c21"},{"parameters":{"options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.2,"position":[260,-140],"id":"9aaf722e-7e6f-4029-8b5f-d9682ab8730a","name":"Respond to Webhook"}],"connections":{"Edit Fields":{"main":[[{"node":"Code","type":"main","index":0}]]},"Code":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]},"Phi-LLM":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"Phi-LLM","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Gmail Trigger":{"Gmail Trigger":{"lastTimeChecked":1745995915,"possibleDuplicates":["1965767f1f4fdd57"]}}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"4f0752fa-0ff2-4270-af7d-29f19a34dca2","triggerCount":1,"tags":[]},{"createdAt":"2025-05-04T14:11:22.430Z","updatedAt":"2025-05-04T14:11:22.430Z","id":"D1djvDwsYtMo8UrC","name":"My workflow 7","active":false,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"booking","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[0,0],"id":"3ca82064-1e14-48ba-b369-f5a81096d93a","name":"Webhook","webhookId":"317034f3-fdc3-46bc-b629-6d69130d106f"}],"connections":{},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"4ade40ef-9e18-4f98-97cb-d32f512c2f98","triggerCount":0,"tags":[]},{"createdAt":"2025-05-22T08:17:00.289Z","updatedAt":"2025-05-22T20:23:02.000Z","id":"jIjjFItr2ljSuJt2","name":"Document_summary","active":true,"isArchived":false,"nodes":[{"parameters":{"requestMethod":"POST","url":"https://az9gmqwnma.execute-api.us-east-1.amazonaws.com/default/docSummarizer","options":{"bodyContentType":"json"},"bodyParametersUi":{"parameter":[{"name":"text","value":"={{ $json.body.text }}"}]},"headerParametersUi":{"parameter":[{"name":"Content-Type","value":"application/json"},{"name":"Accept","value":"application/json"}]}},"id":"5d522ae5-a5e8-4617-aeb9-6aaaa5599331","name":"Call Lambda Summarizer","type":"n8n-nodes-base.httpRequest","typeVersion":1,"position":[-220,-500]},{"parameters":{"httpMethod":"POST","path":"summarise","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-480,-480],"id":"7dff5631-5d04-4a52-85e7-a14284f83b55","name":"Webhook","webhookId":"0e971f35-b8e7-4959-92b8-3ba9ef0f0bcb"},{"parameters":{"options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.2,"position":[100,-500],"id":"93f500ab-f6fc-42b0-afab-9ff89d550d2c","name":"Respond to Webhook"},{"parameters":{"tableId":"sumamries","fieldsUi":{"fieldValues":[{"fieldId":"summary","fieldValue":"={{ $json.summary }}"},{"fieldId":"doc_id","fieldValue":"={{ $json.id }}"},{"fieldId":"filename","fieldValue":"={{ $('Webhook').item.json.body.fileName }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[680,-460],"id":"a30bb823-cfbe-4fa0-8459-6649cd03224b","name":"Supabase","credentials":{"supabaseApi":{"id":"PHrqwslCGP5VROGg","name":"Supabase account"}}},{"parameters":{"assignments":{"assignments":[{"id":"1354cb6a-dfc4-44a2-b9cb-c2b7efc76a33","name":"id","value":"={{ $json.id }}","type":"string"},{"id":"f80385f1-0102-4c3d-ad33-24e514ceabbf","name":"summary","value":"={{ $json.summary }}","type":"string"},{"id":"6fa21b1b-0973-4a67-9a27-dc6b78e25072","name":"ip","value":"={{ $('Webhook').item.json.headers[\"x-forwarded-for\"] }}","type":"string"},{"id":"25b2d7dd-3ef5-42f1-a303-c1bb91e49224","name":"time","value":"={{ $now }}","type":"string"},{"id":"5caaf526-8d47-4c06-b443-12de997d2f5e","name":"filename","value":"={{ $('Webhook').item.json.body.fileName }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[500,-460],"id":"1006580e-bdc3-4ffa-8ae0-79c030486da5","name":"Edit Fields"},{"parameters":{"jsCode":"return items.map(item => {\n  item.json.id = Date.now().toString(36) + Math.random().toString(36).slice(2);\n  return item;\n});"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[320,-460],"id":"f14f0555-fae1-4161-8512-353bb884e97e","name":"Code"}],"connections":{"Call Lambda Summarizer":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"Call Lambda Summarizer","type":"main","index":0}]]},"Respond to Webhook":{"main":[[{"node":"Code","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"Supabase","type":"main","index":0}]]},"Code":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Google Drive Trigger1":{"lastTimeChecked":"2025-05-22T16:59:15Z"}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"eb8844e8-2b26-4eed-bd74-c23f2cb8cd00","triggerCount":1,"tags":[]},{"createdAt":"2025-06-30T11:53:11.114Z","updatedAt":"2025-06-30T11:53:12.000Z","id":"73SsiPaEPLDelfBw","name":"kids_app","active":true,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"firebase","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[0,0],"id":"57152c3d-2eb5-4fdd-bc9b-7153eb9f4cf1","name":"Webhook","webhookId":"ff57a654-b2f8-4f78-8156-fbdaca83dc7e"}],"connections":{},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"e86c0c07-41ca-443b-a161-ca7f4d109854","triggerCount":1,"tags":[]}]